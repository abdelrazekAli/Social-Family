(this["webpackJsonpreact-social"]=this["webpackJsonpreact-social"]||[]).push([[0],{100:function(e,t,s){},101:function(e,t,s){},102:function(e,t,s){},103:function(e,t,s){},104:function(e,t,s){},105:function(e,t,s){},106:function(e,t,s){},107:function(e,t,s){},108:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),n=s(25),r=s.n(n),i=s(3),o=s.n(i),l=s(33),j=s(5),d=s(4),u=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"LOGOUT":return{user:null,isFetching:!1,error:!1};default:return e}},b=s(7),m=s.n(b),p=s(45),h=s(0),O={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},x=Object(c.createContext)(O),f=function(e){var t=e.children,s=Object(c.useReducer)(u,O),a=Object(d.a)(s,2),n=a[0],r=a[1];return Object(c.useEffect)((function(){localStorage.setItem("user",JSON.stringify(n.user))}),[n.user]),Object(h.jsx)(x.Provider,{value:{user:n.user,isFetching:n.isFetching,error:n.error,dispatch:r},children:t})},v=O.user,g=function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/api/v1/auth/refresh-token",{token:v.refreshToken});case 3:return t=e.sent,localStorage.setItem("user",JSON.stringify(Object(l.a)(Object(l.a)({},v),{},{accessToken:t.data.accessToken}))),e.abrupt("return",t.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),N=m.a.create();if(v){var k=Object(p.a)(v.accessToken);N.interceptors.request.use(function(){var e=Object(j.a)(o.a.mark((function e(t){var s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=new Date,!(1e3*k.exp<s.getTime())){e.next=6;break}return e.next=4,g();case 4:c=e.sent,t.headers["auth-token"]=c.accessToken;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)}))}var w=s(6),y=s(8);s(79);function I(){return Object(h.jsx)("div",{className:"topbarContainer",children:Object(h.jsx)("div",{children:Object(h.jsx)(w.b,{to:"/",children:Object(h.jsx)("span",{className:"logo",children:"Family Social"})})})})}s(88),s(89);function _(e){var t=e.user,s=t.img;return Object(h.jsx)(w.b,{to:"/profile/".concat(null===t||void 0===t?void 0:t._id),children:Object(h.jsxs)("li",{className:"rightbarFriend",children:[Object(h.jsx)("div",{className:"rightbarProfileImgContainer",children:Object(h.jsx)("img",{className:"rightbarProfileImg",src:s?"".concat("http://localhost:8800/images/").concat(s):"/assets/person/noAvatar.png",alt:"userImg"})}),Object(h.jsx)("span",{className:"rightbarUsername",children:null===t||void 0===t?void 0:t.username})]})})}var C=s(126),S=s(51),T=s.n(S),L=s(52),F=s.n(L),R=s(122),P=s(123),E=s(124),A=s(125);function q(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),s=Object(c.useContext)(x),a=s.user,n=s.dispatch,r=Object(c.useState)(!1),i=Object(d.a)(r,2),l=i[0],u=i[1],b=Object(c.useState)(!0),p=Object(d.a)(b,2),O=p[0],f=p[1],v=Object(c.useState)([]),g=Object(d.a)(v,2),N=g[0],k=g[1],y=function(){var e=Object(j.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.length>0)){e.next=8;break}return e.next=4,m.a.get("/api/v1/users?search=".concat(t));case 4:s=e.sent,k(s.data),e.next=9;break;case 8:k([]);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/api/v1/auth/logout",{token:a.refreshToken});case 3:e.sent&&(n({type:"LOGOUT"}),window.location.replace("/")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.location.replace("/");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return window.onclick=function(t){t.target===e.current&&f(!O)},Object(h.jsxs)("div",{children:[Object(h.jsxs)("button",{className:"toggle-button",onClick:function(){u(!l),document.getElementById("root").classList.toggle("hide-root")},children:[Object(h.jsx)("div",{className:"toggle-button-line"}),Object(h.jsx)("div",{className:"toggle-button-line"}),Object(h.jsx)("div",{className:"toggle-button-line"})]}),Object(h.jsx)("div",{className:l?"sidebar d-block":"sidebar",children:Object(h.jsxs)("div",{className:"sidebarWrapper",children:[Object(h.jsxs)("ul",{className:"sidebarList",children:[Object(h.jsx)(w.c,{to:"/",exact:!0,children:Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(R.a,{className:"sidebarIcon "}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Home"})]})}),Object(h.jsx)(w.c,{to:"/profile/".concat(a._id),children:Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(P.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Profile"})]})}),Object(h.jsx)(w.c,{to:"/requests",children:Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(E.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Requests"})]})}),Object(h.jsx)(w.c,{to:"/chats",children:Object(h.jsxs)("li",{className:"sidebarListItem",children:[Object(h.jsx)(A.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Chats"})]})}),Object(h.jsxs)("li",{className:"sidebarListItem",onClick:function(){f(!O)},children:[Object(h.jsx)(T.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Invite Family"})]}),Object(h.jsxs)("li",{className:"sidebarListItem",onClick:I,children:[Object(h.jsx)(F.a,{className:"sidebarIcon"}),Object(h.jsx)("span",{className:"sidebarListItemText",children:"Logout"})]})]}),Object(h.jsx)("hr",{className:"sidebarHr"}),Object(h.jsxs)("div",{className:"topbarCenter",children:[Object(h.jsxs)("div",{className:"searchbar",children:[Object(h.jsx)(C.a,{}),Object(h.jsx)("input",{placeholder:"Search for relatives",onKeyUp:function(e){return y(e.target.value)},className:"searchInput"})]}),Object(h.jsx)("div",{className:"mt-1",children:N.length>0&&N.map((function(e){return Object(h.jsx)(_,{user:e},e._id)}))})]})]})}),!O&&Object(h.jsx)("modal",{children:Object(h.jsx)("div",{ref:e,id:"myModal",className:"modal",children:Object(h.jsxs)("div",{className:"modal-content p-relative",children:[Object(h.jsx)("span",{ref:t,onClick:function(){return f(!0)},className:"modal-close",children:"\xd7"}),Object(h.jsx)("h3",{children:"Invite Your Family"}),Object(h.jsxs)("form",{className:"invite-form",children:[Object(h.jsx)("input",{className:"invite-input",placeholder:"Email Address",type:"email"}),Object(h.jsx)("input",{className:"invite-input button",type:"submit",value:"Invite"})]})]})})})]})}s(91),s(92);function D(e){var t=e.post,s="http://localhost:8800/images/",a=t.img,n=t.userId.img,r=Object(c.useContext)(x).user,i=Object(c.useState)(!1),l=Object(d.a)(i,2),u=l[0],b=l[1],m=Object(c.useState)(t.likes.length),p=Object(d.a)(m,2),O=p[0],f=p[1],v=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(u?O-1:O+1),b(!u),e.next=4,N({method:"put",url:"/api/v1/posts/".concat(t._id,"/like"),headers:{"auth-token":r.accessToken}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"post",children:Object(h.jsxs)("div",{className:"postWrapper",children:[Object(h.jsx)("div",{className:"postTop",children:Object(h.jsxs)("div",{className:"postTopLeft",children:[Object(h.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(h.jsx)("img",{className:"postProfileImg",src:n?"".concat(s).concat(n):"/assets/person/noAvatar.png",alt:"userImg"})}),Object(h.jsxs)("div",{children:[Object(h.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(h.jsx)("span",{className:"postUsername",children:t.userId.username})}),Object(h.jsx)("span",{className:"postDate",children:new Date(t.createdAt).toLocaleString()})]})]})}),Object(h.jsx)(w.b,{to:{pathname:"/posts/".concat(t._id),state:{isLiked:u}},children:Object(h.jsxs)("div",{className:"postCenter",children:[Object(h.jsx)("span",{className:"postText",children:t.desc}),a&&Object(h.jsx)("img",{className:"postImg",src:"".concat(s).concat(a),alt:"postImg"})]})}),Object(h.jsxs)("div",{className:"postBottom",children:[Object(h.jsxs)("div",{className:"postBottomLeft",onClick:v,children:[Object(h.jsx)("img",{className:"likeIcon",src:"".concat(s,"like.png"),alt:""}),Object(h.jsx)("span",{className:"postLikeCounter",children:O})]}),Object(h.jsx)(w.b,{to:{pathname:"/posts/".concat(t._id),state:{isLiked:u}},children:Object(h.jsx)("div",{className:"postBottomRight",children:Object(h.jsx)("span",{className:"postCommentText",children:"Comments"})})})]})]})})}s(93);var U=s(129),B=s(127),W=s(128);function M(){var e=Object(c.useRef)(),t=Object(c.useContext)(x).user,s=Object(c.useState)(null),a=Object(d.a)(s,2),n=a[0],r=a[1],i=Object(c.useState)(!1),l=Object(d.a)(i,2),u=l[0],b=l[1],p=function(){var s=Object(j.a)(o.a.mark((function s(c){var a,r,i;return o.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(c.preventDefault(),a={userId:t._id,desc:e.current.value},!n&&!a.desc){s.next=29;break}if(b(!0),!n){s.next=19;break}return r=new FormData,i="".concat(Date.now(),"_").concat(n.name),r.append("name",i),r.append("file",n),a.img=i,console.log(a),s.prev=11,s.next=14,m.a.post("/api/v1/upload",r);case 14:s.next=19;break;case 16:s.prev=16,s.t0=s.catch(11),console.log(s.t0);case 19:return s.prev=19,s.next=22,N.post("/api/v1/posts",a,{headers:{"auth-token":t.accessToken}});case 22:b(!1),window.location.reload(),s.next=29;break;case 26:s.prev=26,s.t1=s.catch(19),console.log(s.t1);case 29:case"end":return s.stop()}}),s,null,[[11,16],[19,26]])})));return function(e){return s.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"share",children:[Object(h.jsxs)("div",{className:"shareWrapper",children:[Object(h.jsxs)("div",{className:"shareTop",children:[Object(h.jsx)("img",{className:"shareProfileImg",src:"/assets/person/noAvatar.png",alt:""}),Object(h.jsx)("input",{placeholder:"Write a post",className:"shareInput",ref:e})]}),Object(h.jsx)("hr",{className:"shareHr"}),n&&Object(h.jsxs)("div",{className:"shareImgContainer",children:[Object(h.jsx)("img",{className:"shareImg",src:URL.createObjectURL(n),alt:""}),Object(h.jsx)(B.a,{className:"shareCancelImg",onClick:function(){return r(null)}})]}),Object(h.jsxs)("form",{className:"shareBottom",onSubmit:p,children:[Object(h.jsx)("div",{className:"shareOptions",children:Object(h.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(h.jsx)(W.a,{htmlColor:"#ec4747",className:"shareIcon"}),Object(h.jsx)("span",{className:"shareOptionText",children:"Photo | Video"}),Object(h.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return r(e.target.files[0])}})]})}),Object(h.jsx)("button",{className:"shareButton",type:"submit",disabled:u,children:"Post"})]})]}),u&&Object(h.jsx)("div",{className:"loading",children:Object(h.jsx)(U.a,{color:"inherit",size:"25px"})})]})}function z(e){var t=e.share,s=e.profile,a=Object(c.useState)([]),n=Object(d.a)(a,2),r=n[0],i=n[1],l=Object(c.useContext)(x).user;return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=6;break}return e.next=3,m.a.get("/api/v1/posts/user/".concat(s));case 3:t=e.sent,e.next=9;break;case 6:return e.next=8,m.a.get("/api/v1/posts/timeline/".concat(l._id));case 8:t=e.sent;case 9:i(t.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l._id,s]),Object(h.jsx)("div",{className:"feed",children:Object(h.jsxs)("div",{className:"feedWrapper",children:[t&&Object(h.jsx)(M,{}),r.length>0&&r.map((function(e){return Object(h.jsx)(D,{post:e},e._id)}))]})})}s(94);function G(e){var t=e.user,s=e.hideImg,a=e.userFamily,n=Object(c.useState)([]),r=Object(d.a)(n,2),i=r[0],l=r[1],u=Object(c.useContext)(x).user;Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/v1/users/family/".concat(u._id));case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[u._id]);var b=function(){return Object(h.jsxs)(h.Fragment,{children:[!s&&Object(h.jsx)("img",{className:"rightbarAd",src:"/assets/ad.jpg",alt:""}),Object(h.jsx)("h4",{className:"rightbarTitle",children:"Family"}),Object(h.jsx)("div",{className:" rightbarFriendList",children:i.length>0&&i.map((function(e){return Object(h.jsx)(_,{user:e},e._id)}))})]})},p=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"btn-container"}),(null===a||void 0===a?void 0:a.length)>0&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h4",{className:"rightbarTitle",children:"Family"}),Object(h.jsx)("div",{className:"rightbarFollowings",children:a.map((function(e){return Object(h.jsx)(_,{user:e},e._id)}))})]})]})};return Object(h.jsx)("div",{className:"rightbar",children:Object(h.jsx)("div",{className:"rightbarWrapper",children:t?Object(h.jsx)(p,{}):Object(h.jsx)(b,{})})})}s(95);function H(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(I,{}),Object(h.jsxs)("div",{className:"homeContainer",children:[Object(h.jsx)(q,{}),Object(h.jsx)(z,{share:!0}),Object(h.jsx)(G,{})]})]})}s(96);var J=[{id:1,profilePicture:"person/1.jpg",username:"Relative 1"},{id:2,profilePicture:"person/2.jpg",username:"Relative 2",comment:"Best family"},{id:3,profilePicture:"person/3.jpg",username:"Relative 3",comment:"Nice picture"},{id:4,profilePicture:"person/4.jpg",username:"Relative 4",comment:"I love my family"},{id:5,profilePicture:"person/5.jpg",username:"Relative 5"},{id:6,profilePicture:"person/6.jpg",username:"Relative 6"},{id:7,profilePicture:"person/7.jpg",username:"Relative 7"},{id:8,profilePicture:"person/8.jpg",username:"Relative 8"}],Y=s(130);function K(){var e=Object(y.h)().userId,t=J.filter((function(t){return t.id===Number(e)}));console.log(t);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(I,{}),Object(h.jsxs)("div",{className:"chatContainer",children:[Object(h.jsx)(q,{}),Object(h.jsxs)("div",{className:"container-fluid my-1",children:[Object(h.jsx)("input",{id:"chat-id",type:"hidden",value:"<%= chatId %>"}),Object(h.jsx)("input",{id:"friendId",type:"hidden",name:"friendId",value:"<%= friendData.id %>"}),Object(h.jsx)("div",{className:"row justify-content-center h-100",children:Object(h.jsx)("div",{className:"col-md-8 col-xl-6 chat",children:Object(h.jsxs)("div",{className:"card card-chat",children:[Object(h.jsxs)("div",{className:"card-header msg_head",children:[Object(h.jsxs)("div",{className:"d-flex bd-highlight",children:[Object(h.jsx)("div",{className:"img_cont",children:Object(h.jsx)(w.b,{to:"/chat/".concat(t[0].id),children:Object(h.jsx)("img",{src:"http://localhost:8800/images/"+t[0].profilePicture,className:"rounded-circle user_img",alt:""})})}),Object(h.jsxs)("div",{className:"user_info",children:[Object(h.jsx)("span",{children:Object(h.jsx)(w.b,{to:"/chat/".concat(t[0].id),className:"pro-link",children:t[0].username})}),Object(h.jsx)("p",{children:"Private chat"})]})]}),Object(h.jsx)("span",{id:"action_menu_btn",children:Object(h.jsx)("i",{className:"fa fa-ellipsis-v"})})]}),Object(h.jsxs)("div",{id:"message-container",className:"card-body msg_card_body",children:[Object(h.jsxs)("div",{className:"position-relative d-flex justify-content-end mb-4",children:[Object(h.jsx)("div",{className:"msg_cotainer_send",children:Object(h.jsx)("div",{className:"msg-content",children:"Hi, How are you bro ?"})}),Object(h.jsx)("span",{className:"msg_time_send",children:"11:55 AM"})]}),Object(h.jsxs)("div",{className:"position-relative d-flex justify-content-start mb-4",children:[Object(h.jsx)("div",{className:"msg_cotainer",children:"I'm good, What about you ?"}),Object(h.jsx)("span",{className:"msg_time",children:"11:56 AM"})]}),Object(h.jsxs)("div",{className:"position-relative d-flex justify-content-end mb-4",children:[Object(h.jsx)("div",{className:"msg_cotainer_send",children:Object(h.jsx)("div",{className:"msg-content",children:"I'm not fine, I was very ill bcz of winter"})}),Object(h.jsx)("span",{className:"msg_time_send",children:"11:57 AM"})]}),Object(h.jsxs)("div",{className:"position-relative d-flex justify-content-start mb-4",children:[Object(h.jsx)("div",{className:"msg_cotainer",children:"Opps, Sorry for not texting you last days"}),Object(h.jsx)("span",{className:"msg_time",children:"11:59 AM"})]}),Object(h.jsxs)("div",{className:"position-relative d-flex justify-content-start mb-4",children:[Object(h.jsx)("div",{className:"msg_cotainer",children:"Where are you now ?"}),Object(h.jsx)("span",{className:"msg_time",children:"12:00 PM"})]}),Object(h.jsxs)("div",{className:"position-relative d-flex justify-content-end mb-4",children:[Object(h.jsx)("div",{className:"msg_cotainer_send",children:Object(h.jsx)("div",{className:"msg-content",children:"I'm in home"})}),Object(h.jsx)("span",{className:"msg_time_send",children:"12:02 PM"})]}),Object(h.jsxs)("div",{className:"position-relative d-flex justify-content-start mb-4",children:[Object(h.jsx)("div",{className:"msg_cotainer",children:"On my way to you"}),Object(h.jsx)("span",{className:"msg_time",children:"12:05 PM"})]}),Object(h.jsxs)("div",{className:"position-relative d-flex justify-content-end mb-4",children:[Object(h.jsx)("div",{className:"msg_cotainer_send",children:Object(h.jsx)("div",{className:"msg-content",children:"You're welcome anytime bro"})}),Object(h.jsx)("span",{className:"msg_time_send",children:"12:08 PM"})]})]}),Object(h.jsx)("div",{className:"card-footer",children:Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("textarea",{id:"message",name:"msg-input",className:"form-control type_msg textarea-bd",placeholder:"Write your message...",maxLength:"10000",autoFocus:!0}),Object(h.jsx)("div",{id:"sendBtn",className:"input-group-append  justify-content-end d-flex",children:Object(h.jsx)("span",{className:"input-group-text send_btn bg-white color-main",children:Object(h.jsx)(Y.a,{})})})]})})]})})})]}),Object(h.jsx)(G,{hideImg:!0})]})]})}s(97),s(98);var V=function(e){var t=e.user;return Object(h.jsxs)("div",{className:"user-chat-card mb-2",children:[Object(h.jsx)("img",{src:t.profilePicture?"http://localhost:8800/images/"+t.img:"/assets/person/noAvatar.png",alt:"user"}),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h5",{children:t.username}),Object(h.jsx)(w.b,{to:"/chat/".concat(t._id),className:"btn btn-chat",children:"Chat"})]})]})};function Q(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),s=t[0],a=t[1],n=Object(c.useContext)(x).user;return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/v1/users/family/".concat(n._id));case 2:t=e.sent,a(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n._id]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(I,{}),Object(h.jsxs)("div",{className:"chatsContainer",children:[Object(h.jsx)(q,{}),Object(h.jsxs)("div",{className:"chats",children:[Object(h.jsxs)("div",{className:"chatsHeader",children:[Object(h.jsx)("p",{className:"mb-1",children:"Get in Touch "}),Object(h.jsx)("p",{children:" Start Chat Your Family"})]}),Object(h.jsx)("div",{className:"users",children:s.length>0&&s.map((function(e){return Object(h.jsx)(V,{user:e},e.id)}))})]})]})]})}s(99),s(100);function X(e){var t=e.msg;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"alert-danger",children:Object(h.jsx)("p",{children:t})})})}function Z(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useState)(""),a=Object(d.a)(s,2),n=a[0],r=a[1],i=Object(c.useContext)(x),l=i.isFetching,u=i.dispatch,b=i.error,p=function(){var s=Object(j.a)(o.a.mark((function s(c){var a;return o.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return c.preventDefault(),u({type:"LOGIN_START"}),s.prev=2,s.next=5,m.a.post("/api/v1/auth/login",{email:e.current.value,password:t.current.value});case 5:a=s.sent,u({type:"LOGIN_SUCCESS",payload:a.data}),window.location.replace("/"),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(2),u({type:"LOGIN_FAILURE"}),500===s.t0.response.status?r("Somthing went wrong!"):r("Invalid email or password");case 14:case"end":return s.stop()}}),s,null,[[2,10]])})));return function(e){return s.apply(this,arguments)}}();return document.body.style.backgroundColor="#0080ff",Object(h.jsx)("div",{className:"login-page",children:Object(h.jsxs)("div",{className:"login-container",children:[Object(h.jsx)("div",{className:"login-icon",children:"Family Social"}),Object(h.jsxs)("div",{className:"login-form",children:[Object(h.jsx)("div",{className:"login-title",children:"Log In"}),Object(h.jsxs)("form",{onSubmit:p,children:[Object(h.jsx)("input",{className:"login-input",placeholder:"Email Address",type:"email",required:!0,ref:e}),Object(h.jsx)("input",{className:"login-input",placeholder:"Password",type:"password",minLength:"6",required:!0,ref:t}),Object(h.jsx)("button",{className:"login-input button",type:"submit",disabled:l,children:l?Object(h.jsx)(U.a,{color:"#fff",size:"20px"}):"Log In"}),b&&Object(h.jsx)(X,{msg:n})]})]}),Object(h.jsxs)("div",{className:"login-signup",children:["Don't have an account?",Object(h.jsx)(w.b,{to:"/register",children:"Sign Up"})]})]})})}s(101);function $(){var e=Object(y.h)().userId,t=Object(c.useContext)(x).user,s=Object(c.useState)(),a=Object(d.a)(s,2),n=a[0],r=a[1],i=Object(c.useState)(),l=Object(d.a)(i,2),u=l[0],b=l[1],p=Object(c.useState)(!1),O=Object(d.a)(p,2),f=O[0],v=O[1],g=null===u||void 0===u?void 0:u.img;Object(c.useEffect)((function(){(function(){var s=Object(j.a)(o.a.mark((function s(){var c,a;return o.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,m.a.get("/api/v1/users/".concat(e));case 3:return c=s.sent,b(c.data),s.next=7,m.a.get("/api/v1/users/".concat(t._id));case 7:a=s.sent,r(a.data),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(0),console.log(s.t0);case 14:case"end":return s.stop()}}),s,null,[[0,11]])})));return function(){return s.apply(this,arguments)}})()()}),[e,t._id]);var k=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,N({method:"put",url:"/api/v1/users/".concat(u._id,"/accept"),headers:{"auth-token":t.accessToken}});case 3:v(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,N({method:"put",url:"/api/v1/users/".concat(u._id,"/add"),headers:{"auth-token":t.accessToken}});case 3:v(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,N({method:"delete",url:"/api/v1/users/".concat(u._id,"/cancel"),headers:{"auth-token":t.accessToken}});case 3:v(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,N({method:"delete",url:"/api/v1/users/".concat(u._id,"/reject"),headers:{"auth-token":t.accessToken}});case 3:v(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(I,{}),Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)(q,{}),u&&n&&Object(h.jsxs)("div",{className:"profileRight",children:[Object(h.jsxs)("div",{className:"profileRightTop",children:[Object(h.jsx)("div",{className:"profileCover",children:Object(h.jsx)("img",{className:"profileUserImg",src:g?"".concat("http://localhost:8800/images/").concat(g):"/assets/person/noAvatar.png",alt:"userImg"})}),Object(h.jsx)("div",{className:"profileInfo",children:Object(h.jsx)("h4",{className:"profileInfoName",children:u.username})})]}),t._id!==u._id&&Object(h.jsx)("div",{className:"btn-container",children:n.family.find((function(e){return e._id===u._id}))?Object(h.jsx)("button",{className:"btn btn-red",children:"Remove"}):n.sentRequests.find((function(e){return e._id===u._id}))?Object(h.jsx)("button",{onClick:_,disabled:f,className:"btn btn-red",children:"Cancel"}):n.friendRequests.find((function(e){return e._id===u._id}))?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:k,disabled:f,className:"btn btn-confirm",children:"Confirm"}),Object(h.jsx)("button",{onClick:C,disabled:f,className:"btn btn-delete",children:"Delete"})]}):Object(h.jsx)("button",{onClick:w,disabled:f,className:" btn btn-confirm",children:"Add"})}),f&&Object(h.jsx)("div",{className:"loading",children:Object(h.jsx)(U.a,{color:"inherit",size:"20px"})}),Object(h.jsxs)("div",{className:"profileRightBottom",children:[Object(h.jsx)(G,{user:!0,userFamily:u.family}),Object(h.jsx)("h4",{className:"rightbarTitle",children:"Posts"}),Object(h.jsx)(z,{share:!1,profile:e})]})]})]})]})}s(102);function ee(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useRef)(),a=Object(c.useRef)(),n=Object(c.useState)(!1),r=Object(d.a)(n,2),i=r[0],l=r[1],u=Object(c.useState)({isError:!1,msg:""}),b=Object(d.a)(u,2),p=b[0],O=b[1],x=function(){var c=Object(j.a)(o.a.mark((function c(n){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(n.preventDefault(),console.log("hi",s.current.value,a.current.value),s.current.value===a.current.value){c.next=4;break}return c.abrupt("return",O({isError:!0,msg:"Passwords are not the same"}));case 4:return l(!0),O({isError:!1,msg:""}),c.prev=6,c.next=9,m.a.post("/api/v1/auth/register",{username:e.current.value,email:t.current.value,password:s.current.value});case 9:c.sent.data&&(window.location.replace("/login"),l(!1)),c.next=17;break;case 13:c.prev=13,c.t0=c.catch(6),l(!1),409===c.t0.response.status?O({isError:!0,msg:"Email is already used"}):O({isError:!0,msg:"Somthing went wrong!"});case 17:case"end":return c.stop()}}),c,null,[[6,13]])})));return function(e){return c.apply(this,arguments)}}();return document.body.style.backgroundColor="#0080ff",Object(h.jsxs)("div",{className:"login-container",children:[Object(h.jsx)("div",{className:"login-icon",children:"Family Social"}),Object(h.jsxs)("div",{className:"login-form",children:[Object(h.jsx)("div",{className:"login-title",children:"Sign Up"}),Object(h.jsxs)("form",{onSubmit:x,children:[Object(h.jsx)("input",{className:"login-input",placeholder:"Full Name",type:"text",required:!0,ref:e}),Object(h.jsx)("input",{className:"login-input",placeholder:"Email Address",type:"email",required:!0,ref:t}),Object(h.jsx)("input",{className:"login-input",placeholder:"Password",type:"password",required:!0,ref:s}),Object(h.jsx)("input",{className:"login-input",placeholder:"Confirm Password",type:"password",required:!0,ref:a}),Object(h.jsx)("button",{className:"login-input button",type:"submit",disabled:i,children:i?Object(h.jsx)(U.a,{color:"#fff",size:"20px"}):"Sign Up"}),p.isError&&Object(h.jsx)(X,{msg:p.msg})]})]}),Object(h.jsxs)("div",{className:"login-signup",children:["Have an account? ",Object(h.jsx)(w.b,{to:"/login",children:"Log in"})]})]})}s(103),s(104);var te=function(e){var t=e.request,s=Object(c.useContext)(x).user,a=t.img,n=Object(c.useState)(!1),r=Object(d.a)(n,2),i=r[0],l=r[1],u=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,N({method:"put",url:"/api/v1/users/".concat(t._id,"/accept"),headers:{"auth-token":s.accessToken}});case 3:l(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,N({method:"delete",url:"/api/v1/users/".concat(t._id,"/reject"),headers:{"auth-token":s.accessToken}});case 3:l(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"request",children:[Object(h.jsx)(w.b,{to:"/profile/".concat(t._id),children:Object(h.jsx)("img",{className:"req-img",src:a?"".concat("http://localhost:8800/images/").concat(a):"/assets/person/noAvatar.png",alt:"userImg"})}),Object(h.jsxs)("div",{className:"req-details",children:[Object(h.jsx)(w.b,{to:"/profile/".concat(t._id),children:Object(h.jsx)("h3",{children:t.username})}),Object(h.jsxs)("div",{className:"req-buttons",children:[Object(h.jsx)("button",{onClick:u,disabled:i,className:"btn btn-confirm",children:"Confirm"}),Object(h.jsx)("button",{onClick:b,disabled:i,className:"btn btn-delete",children:"Delete"})]})]}),i&&Object(h.jsx)("div",{className:"loading",children:Object(h.jsx)(U.a,{color:"inherit",size:"20px"})})]})};function se(){var e=Object(c.useContext)(x).user,t=Object(c.useState)([]),s=Object(d.a)(t,2),a=s[0],n=s[1];return Object(c.useEffect)((function(){(function(){var t=Object(j.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/api/v1/users/friendRequests/".concat(e._id));case 2:s=t.sent,n(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e._id]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(I,{}),Object(h.jsxs)("div",{className:"RequestsContainer",children:[Object(h.jsx)(q,{}),Object(h.jsx)("div",{className:"requests",children:a.length>0&&a.map((function(e){return Object(h.jsx)(te,{request:e},e._id)}))}),Object(h.jsx)(G,{})]})]})}s(105),s(106),s(107);var ce=s(131);function ae(e){var t=e.comment,s=t.userId.img,a=Object(c.useContext)(x).user,n=Object(c.useState)(!1),r=Object(d.a)(n,2),i=r[0],l=r[1],u=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,N({method:"delete",url:"/api/v1/comments/".concat(t._id),headers:{"auth-token":a.accessToken}});case 3:l(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"comment",children:[Object(h.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(h.jsx)("img",{className:"comment-img",src:s?"".concat("http://localhost:8800/images/").concat(s):"/assets/person/noAvatar.png",alt:"userImg"})}),Object(h.jsxs)("div",{className:"comment-details comment-bg",children:[Object(h.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(h.jsx)("h4",{children:t.userId.username})}),Object(h.jsx)("div",{className:"comment-body",children:Object(h.jsx)("p",{children:t.desc})})]}),t.userId._id===a._id&&Object(h.jsx)(ce.a,{htmlColor:"red",className:"postDeleteIcon",onClick:u}),i&&Object(h.jsx)("div",{className:"loading",children:Object(h.jsx)(U.a,{color:"inherit",size:"18px"})})]})}var ne=s(132);function re(e){var t=e.post,s=e.liked,a=t.img,n=Object(y.g)(),r=t.userId.img,i=Object(c.useContext)(x).user,l="http://localhost:8800/images/",u=Object(c.useState)(t.likes.length),b=Object(d.a)(u,2),p=b[0],O=b[1],f=Object(c.useState)(s),v=Object(d.a)(f,2),g=v[0],k=v[1],I=Object(c.useState)(!1),_=Object(d.a)(I,2),C=_[0],S=_[1],T=Object(c.useState)(),L=Object(d.a)(T,2),F=L[0],R=L[1],P=Object(c.useState)([]),E=Object(d.a)(P,2),A=E[0],q=E[1];Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/v1/comments/".concat(t._id));case 3:s=e.sent,q(s.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t._id,C]);var D=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({method:"put",url:"/api/v1/posts/".concat(t._id,"/like"),headers:{"auth-token":i.accessToken}});case 2:O(g?p-1:p+1),k(!g);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(F.length>0)){e.next=7;break}return S(!0),s={postId:t._id,desc:F},e.next=5,N({method:"post",url:"/api/v1/comments",data:s,headers:{"auth-token":i.accessToken}});case 5:S(!1),R("");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,N({method:"delete",url:"/api/v1/posts/".concat(t._id),headers:{"auth-token":i.accessToken}});case 3:S(!1),n.goBack();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"post",children:Object(h.jsxs)("div",{className:"postWrapper",children:[Object(h.jsxs)("div",{className:"postTop",children:[Object(h.jsxs)("div",{className:"postTopLeft",children:[Object(h.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(h.jsx)("img",{className:"postProfileImg",src:r?"".concat(l).concat(r):"/assets/person/noAvatar.png",alt:"userImg"})}),Object(h.jsxs)("div",{children:[Object(h.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(h.jsx)("span",{className:"postUsername",children:t.userId.username})}),Object(h.jsx)("span",{className:"postDate",children:new Date(t.createdAt).toLocaleString()})]})]}),t.userId._id===i._id&&Object(h.jsx)(ce.a,{htmlColor:"red",className:"postDeleteIcon",onClick:W})]}),Object(h.jsxs)("div",{className:"postCenter",children:[Object(h.jsx)("span",{className:"postText",children:t.desc}),a&&Object(h.jsx)("img",{className:"postImg",src:"".concat(l).concat(a),alt:"postImg"})]}),Object(h.jsxs)("div",{className:"postBottom",children:[Object(h.jsxs)("div",{className:"postBottomLeft",children:[Object(h.jsx)("img",{className:"likeIcon",src:"".concat(l,"like.png"),onClick:D,alt:""}),Object(h.jsx)("span",{className:"postLikeCounter",children:p})]}),Object(h.jsx)("div",{className:"postBottomRight",children:Object(h.jsx)("span",{className:"postCommentText",children:"Comments"})})]}),Object(h.jsxs)("div",{className:"input-group mt-2 ",children:[Object(h.jsx)("textarea",{id:"message",name:"comment-input",style:{resize:"none"},className:"form-control type_msg textarea-bd comment-bg",placeholder:"Write a comment...",value:F,onChange:function(e){R(e.target.value)},maxLength:"10000"}),Object(h.jsx)("div",{className:"input-group-append  justify-content-end d-flex",children:Object(h.jsx)("button",{onClick:B,disabled:C,className:"input-group-text send_btn comment-bg color-main",children:Object(h.jsx)(ne.a,{})})})]}),C&&Object(h.jsx)("div",{className:"loading",children:Object(h.jsx)(U.a,{color:"inherit",size:"25px"})}),A.length>0&&A.map((function(e){return Object(h.jsx)(ae,{comment:e},e._id)}))]})})}function ie(e){var t=e.location,s=Object(y.h)().postId,a=Object(c.useState)(),n=Object(d.a)(a,2),r=n[0],i=n[1];return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/v1/posts/".concat(s));case 3:t=e.sent,i(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(I,{}),Object(h.jsxs)("div",{className:"postContainer",children:[Object(h.jsx)(q,{}),Object(h.jsx)("div",{className:"feed",children:Object(h.jsx)("div",{className:"feedWrapper",children:r&&Object(h.jsx)(re,{post:r,liked:t.state.isLiked})})}),Object(h.jsx)(G,{hideImg:!1})]})]})}var oe=function(){var e=Object(c.useContext)(x).user;return Object(h.jsx)(w.a,{children:Object(h.jsxs)(y.d,{children:[Object(h.jsx)(y.b,{path:"/login",component:Z}),Object(h.jsx)(y.b,{path:"/register",component:ee}),e?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(y.b,{exact:!0,path:"/",component:H}),Object(h.jsx)(y.b,{path:"/profile/:userId",component:$}),Object(h.jsx)(y.b,{path:"/posts/:postId",component:ie}),Object(h.jsx)(y.b,{path:"/requests",component:se}),Object(h.jsx)(y.b,{path:"/chats",component:Q}),Object(h.jsx)(y.b,{path:"/chat/:userId",component:K})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(y.a,{from:"/",to:"/login"}),Object(h.jsx)(y.a,{from:"/profile/:userId",to:"/login"}),Object(h.jsx)(y.a,{from:"/posts/:postId",to:"/login"}),Object(h.jsx)(y.a,{from:"/requests",to:"/login"}),Object(h.jsx)(y.a,{from:"/chats",to:"/login"}),Object(h.jsx)(y.a,{from:"/chat/:userId",to:"/login"})]})]})})};r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(f,{children:Object(h.jsx)(oe,{})})}),document.getElementById("root"))},79:function(e,t,s){},88:function(e,t,s){},89:function(e,t,s){},91:function(e,t,s){},92:function(e,t,s){},93:function(e,t,s){},94:function(e,t,s){},95:function(e,t,s){},96:function(e,t,s){},97:function(e,t,s){},98:function(e,t,s){},99:function(e,t,s){}},[[108,1,2]]]);
//# sourceMappingURL=main.27acdbaf.chunk.js.map