{"version":3,"sources":["context/Reducer.js","context/Context.js","components/topbar/Topbar.jsx","components/friend/Friend.jsx","components/error/Error.jsx","components/sidebar/Sidebar.jsx","components/post/Post.jsx","components/share/Share.jsx","components/feed/Feed.jsx","components/online/Online.jsx","components/rightbar/Rightbar.jsx","pages/home/Home.jsx","components/voice/Voice.jsx","components/record/Record.jsx","components/message/Message.jsx","pages/chat/Chat.jsx","components/video/Video.jsx","pages/Room/Room.jsx","components/userCard/UserCard.jsx","pages/chats/Chats.jsx","pages/login/Login.jsx","pages/profile/Profile.jsx","pages/settings/Settings.jsx","pages/learning/Learning.jsx","pages/register/Register.jsx","components/request/Request.jsx","pages/requests/Requests.jsx","components/comment/Comment.jsx","components/singlePost/SinglePost.jsx","pages/postDetails/PostDetails.jsx","dummyData.js","components/readOnlyPost/ReadOnlyPost.jsx","pages/learningCategory/LearningCategory.jsx","App.js","index.js"],"names":["Reducer","state","action","type","user","isFetching","error","payload","INITIAL_STATE","JSON","parse","localStorage","getItem","Context","createContext","ContextProvider","children","useReducer","dispatch","useEffect","setItem","stringify","Provider","value","refreshToken","a","axios","post","token","res","accessToken","data","console","log","axiosJWT","create","decodedToken","jwt_decode","interceptors","request","use","config","currentDate","Date","exp","getTime","headers","err","Promise","reject","Topbar","className","to","Friend","userImg","img","_id","src","alt","username","Error","msg","Sidebar","modal","useRef","span","useState","users","setUsers","email","setEmail","sidebar","setSidebar","loading","setLoading","searchValue","setSearchValue","useContext","hideModal","setHideModal","invitationFaild","setInvitationFaild","invitationSuccess","setInvitationSuccess","handleSearch","search","length","get","handleLogout","window","location","replace","onclick","e","target","current","onClick","exact","Home","School","Person","Group","Chat","Settings","ExitToApp","Search","placeholder","onKeyUp","maxLength","Array","isArray","map","u","ref","id","CircularProgress","color","size","onSubmit","preventDefault","emailjs","sendForm","then","catch","name","onChange","disabled","Post","postImg","userId","isLiked","setIsLiked","likes","setLikes","likeHandler","method","url","createdAt","toLocaleString","pathname","desc","Share","file","setFile","submitHandler","newPost","FormData","fileName","now","append","reload","URL","createObjectURL","Cancel","htmlFor","PermMedia","htmlColor","style","display","accept","files","Feed","share","profile","posts","setPosts","fetchPosts","p","Online","title","Rightbar","home","online","hideImg","userFriends","onlineFriends","friends","setFriends","auth","filterFriends","friend","find","f","HomeRightbar","ProfileRightbar","OnlineRightbar","Voice","own","time","controls","format","Record","conversationId","setMessages","messages","emitMessage","stopButtonRef","startRecord","setStartRecord","Stop","navigator","mediaDevices","getUserMedia","audio","stream","recordedChunks","mediaRecorder","MediaRecorder","mimeType","addEventListener","push","blob","Blob","voiceMsg","sender","content","onStopClick","stop","this","removeEventListener","start","Mic","Message","socket","friendId","useParams","setFriend","onlineUsers","setOnlineUsers","messagesEndRef","newMessage","setNewMessage","conversation","setConversation","arrivalMessage","setArrivalMessage","uuid","callId","setCallId","callType","setCallType","offerCall","setOfferCall","res1","fetchData","res2","res3","io","on","senderId","prev","emit","filter","newMsg","receiverId","sendMessage","callUser","scrollIntoView","behavior","block","Button","variant","newWindow","open","opener","o","IconButton","aria-label","Phone","Videocam","m","endsWith","renderMessages","autoFocus","Send","Video","peer","friendVideo","srcObject","playsInline","autoPlay","videoConstraints","height","innerHeight","width","innerWidth","Room","socketRef","userVideo","peersRef","roomID","peers","setPeers","joined","setJoined","waiting","setWaiting","friendName","setFriendName","canceling","setCanceling","connect","video","forEach","userID","createPeer","peerID","addPeer","signal","callerID","userToSignal","Peer","initiator","trickle","incomingSignal","index","muted","close","PF","process","REACT_APP_PUBLIC_FOLDER","UserCard","profilePicture","Chats","Login","password","errorMsg","setErrorMsg","handleForm","response","status","document","body","backgroundColor","required","minLength","Profile","setAuth","setProfile","fetchUser","confirmHandler","addHandler","cancelHandler","deleteHandler","unfriendHandler","sentRequests","friendRequests","setUsername","success","setSuccess","isError","setError","handleSubmit","updatedUser","filename","Edit","Learning","backgroundImage","Register","confirmPassword","isLoading","setisLoading","Request","Requests","requests","setRequests","fetchRequests","req","Comment","comment","Delete","SinglePost","liked","history","useHistory","setComment","comments","setComments","fetchComments","commentHandler","NewComment","postId","goBack","resize","CommentSharp","c","PostDetails","setPost","fetchPost","LearningPosts","header","category","ReadOnlyPost","LearningCategory","App","path","component","from","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.375543ee.chunk.js","sourcesContent":["const Reducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN_START\":\n      return {\n        user: null,\n        isFetching: true,\n        error: false,\n      };\n    case \"LOGIN_SUCCESS\":\n      return { user: action.payload, isFetching: false, error: false };\n    case \"LOGIN_FAILURE\":\n      return { user: null, isFetching: false, error: true };\n    case \"UPDATE_START\":\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case \"UPDATE_SUCCESS\":\n      return {\n        user: action.payload,\n        isFetching: false,\n        error: false,\n      };\n    case \"UPDATE_FAILURE\":\n      return {\n        user: state.user,\n        isFetching: false,\n        error: true,\n      };\n    case \"LOGOUT\":\n      return { user: null, isFetching: false, error: false };\n    default:\n      return state;\n  }\n};\n\nexport default Reducer;\n","import { createContext, useReducer, useEffect } from \"react\";\nimport Reducer from \"./Reducer\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\n\nconst INITIAL_STATE = {\n  user: JSON.parse(localStorage.getItem(\"user\")) || null,\n  isFetching: false,\n  error: false,\n};\n\nexport const Context = createContext(INITIAL_STATE);\n\nexport const ContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(Reducer, INITIAL_STATE);\n\n  useEffect(() => {\n    localStorage.setItem(\"user\", JSON.stringify(state.user));\n  }, [state.user]);\n\n  return (\n    <Context.Provider\n      value={{\n        user: state.user,\n        isFetching: state.isFetching,\n        error: state.error,\n        dispatch,\n      }}\n    >\n      {children}\n    </Context.Provider>\n  );\n};\nconst { user } = INITIAL_STATE;\n\n// Refresh token\nconst refreshToken = async () => {\n  try {\n    const res = await axios.post(\"/api/v1/auth/refresh-token\", {\n      token: user.refreshToken,\n    });\n    localStorage.setItem(\n      \"user\",\n      JSON.stringify({ ...user, accessToken: res.data.accessToken })\n    );\n    return res.data;\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const axiosJWT = axios.create();\nif (user) {\n  //This will run before every axios request to refresh token\n  const decodedToken = jwt_decode(user.accessToken);\n  axiosJWT.interceptors.request.use(\n    async (config) => {\n      let currentDate = new Date();\n      if (decodedToken.exp * 1000 < currentDate.getTime()) {\n        const data = await refreshToken();\n        config.headers[\"auth-token\"] = data.accessToken;\n      }\n      return config;\n    },\n    (err) => {\n      return Promise.reject(err);\n    }\n  );\n}\n","import \"./topbar.css\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Topbar() {\n  return (\n    <div className=\"topbarContainer\">\n      <div>\n        <Link to=\"/\">\n          <span className=\"logo\">\n            {/* <span>K</span>\n            <span>I</span>\n            <span>D</span>\n            <span>S</span> */}\n            Kids Social\n          </span>\n        </Link>\n      </div>\n    </div>\n  );\n}\n","import \"./friend.css\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Friend({ user }) {\n  const userImg = user.img;\n\n  return (\n    <Link to={`/profile/${user?._id}`}>\n      <li className=\"rightbarFriend\">\n        <div className=\"rightbarProfileImgContainer\">\n          <img\n            className=\"rightbarProfileImg\"\n            src={\n              userImg\n                ? `/images/users/${userImg}`\n                : `/assets/images/noAvatar.png`\n            }\n            alt=\"userImg\"\n          />\n        </div>\n        <span className=\"rightbarUsername\">{user?.username}</span>\n      </li>\n    </Link>\n  );\n}\n","import \"./error.css\";\n\nexport default function Error({ msg }) {\n  return (\n    <>\n      <div className=\"alert-danger text-center\">\n        <p>{msg}</p>\n      </div>\n    </>\n  );\n}\n","import \"./sidebar.css\";\nimport axios from \"axios\";\nimport emailjs from \"emailjs-com\";\nimport Friend from \"../friend/Friend\";\nimport { NavLink } from \"react-router-dom\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { Context } from \"../../context/Context\";\nimport { useState, useContext, useRef } from \"react\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport {\n  Chat,\n  Group,\n  Person,\n  Home,\n  School,\n  Search,\n  Settings,\n  ExitToApp,\n} from \"@material-ui/icons\";\n\n// Import components\nimport Error from \"../../components/error/Error\";\n\nexport default function Sidebar() {\n  const modal = useRef(null);\n  const span = useRef(null);\n\n  const [users, setUsers] = useState(null);\n  const [email, setEmail] = useState(\"\");\n  const [sidebar, setSidebar] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [searchValue, setSearchValue] = useState(false);\n  const { user, dispatch } = useContext(Context);\n  const [hideModal, setHideModal] = useState(true);\n  const [invitationFaild, setInvitationFaild] = useState(false);\n  const [invitationSuccess, setInvitationSuccess] = useState(false);\n\n  const toggleSidebar = () => {\n    setSidebar(!sidebar);\n  };\n\n  const handleSearch = async (search) => {\n    try {\n      if (search.length > 0) {\n        setSearchValue(search);\n        // Get users\n        const res = await axios.get(`/api/v1/users?search=${search}`);\n        setUsers(res.data);\n      } else {\n        setUsers([]);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      let res = await axios.post(\"/api/v1/auth/logout\", {\n        token: user.refreshToken,\n      });\n      if (res) {\n        dispatch({ type: \"LOGOUT\" });\n        window.location.replace(\"/\");\n      }\n    } catch (err) {\n      window.location.replace(\"/\");\n    }\n  };\n\n  // When the user clicks anywhere outside of the modal, close it\n  window.onclick = (e) => {\n    if (e.target === modal.current) {\n      setHideModal(!hideModal);\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setInvitationSuccess(false);\n    setInvitationFaild(false);\n    if (email.length > 0) {\n      setLoading(true);\n      emailjs\n        .sendForm(\n          \"service_lioq9kd\",\n          \"template_80lt9zl\",\n          e.target,\n          \"P5y7xvwHYXkrCpB3m\"\n        )\n        .then(() => {\n          setLoading(false);\n          setInvitationSuccess(true);\n        })\n        .catch(() => {\n          setLoading(false);\n          setInvitationFaild(true);\n          setInvitationSuccess(false);\n        });\n    }\n  };\n\n  return (\n    <div>\n      <button className=\"toggle-button\" onClick={toggleSidebar}>\n        <div className=\"toggle-button-line\" />\n        <div className=\"toggle-button-line\" />\n        <div className=\"toggle-button-line\" />\n      </button>\n      <div className={sidebar ? \"sidebar d-block\" : \"sidebar\"}>\n        <div className=\"sidebarWrapper\">\n          <ul className=\"sidebarList\">\n            <NavLink to=\"/\" exact={true}>\n              <li className=\"sidebarListItem\">\n                <Home className=\"sidebarIcon \" />\n                <span className=\"sidebarListItemText\">Home</span>\n              </li>\n            </NavLink>\n            <NavLink to=\"/learning\" exact={true}>\n              <li className=\"sidebarListItem\">\n                <School className=\"sidebarIcon \" />\n                <span className=\"sidebarListItemText\">Learning</span>\n              </li>\n            </NavLink>\n            <NavLink to={`/profile/${user._id}`}>\n              <li className=\"sidebarListItem\">\n                <Person className=\"sidebarIcon\" />\n                <span className=\"sidebarListItemText\">Profile</span>\n              </li>\n            </NavLink>\n            <NavLink to=\"/requests\">\n              <li className=\"sidebarListItem\">\n                <Group className=\"sidebarIcon\" />\n                <span className=\"sidebarListItemText\">Requests</span>\n              </li>\n            </NavLink>\n            <NavLink to=\"/chats\">\n              <li className=\"sidebarListItem\">\n                <Chat className=\"sidebarIcon\" />\n                <span className=\"sidebarListItemText\">Chats</span>\n              </li>\n            </NavLink>\n            <NavLink to=\"/settings\">\n              <li className=\"sidebarListItem\">\n                <Settings className=\"sidebarIcon\" />\n                <span className=\"sidebarListItemText\">Settings</span>\n              </li>\n            </NavLink>\n            <li\n              className=\"sidebarListItem\"\n              onClick={() => {\n                setHideModal(!hideModal);\n              }}\n            >\n              <AddIcon className=\"sidebarIcon\" />\n              <span className=\"sidebarListItemText\">Invite Friend</span>\n            </li>\n            <li className=\"sidebarListItem\" onClick={handleLogout}>\n              <ExitToApp className=\"sidebarIcon\" />\n              <span className=\"sidebarListItemText\">Logout</span>\n            </li>\n          </ul>\n          <hr className=\"sidebarHr\" />\n\n          <div className=\"topbarCenter\">\n            <div className=\"searchbar\">\n              <Search />\n              <input\n                placeholder=\"Search for new friends\"\n                onKeyUp={(e) => handleSearch(e.target.value)}\n                maxLength={20}\n                className=\"searchInput\"\n              />\n            </div>\n            <div className=\"mt-1\">\n              {Array.isArray(users) &&\n                (users.length > 0 ? (\n                  users.map((u) => <Friend key={u._id} user={u} />)\n                ) : (\n                  <span className=\"color-darker\">\n                    No users matches \"{searchValue}\"\n                  </span>\n                ))}\n            </div>\n          </div>\n        </div>\n      </div>\n      {!hideModal && (\n        <div>\n          <div ref={modal} id=\"myModal\" className=\"modal\">\n            <div className=\"modal-content p-relative\">\n              <span\n                ref={span}\n                onClick={() => setHideModal(true)}\n                className=\"modal-close\"\n              >\n                &times;\n              </span>\n              {loading && (\n                <div className=\"loading\">\n                  <CircularProgress color=\"inherit\" size=\"20px\" />\n                </div>\n              )}\n              <h3>Invite Your Friends</h3>\n              <form className=\"invite-form\" onSubmit={handleSubmit}>\n                <input\n                  className=\"invite-input\"\n                  placeholder=\"Email Address\"\n                  type=\"email\"\n                  name=\"email\"\n                  onChange={(e) => setEmail(e.target.value)}\n                />\n                <input\n                  className=\"invite-input\"\n                  placeholder=\"Email Address\"\n                  type=\"hidden\"\n                  name=\"username\"\n                  value={user.username}\n                />\n                <button\n                  className=\"invite-input button\"\n                  type=\"submit\"\n                  disabled={loading}\n                >\n                  Invite\n                </button>\n              </form>\n              {invitationSuccess && (\n                <span className=\"text-success\">Invitation has been sent.</span>\n              )}\n              {invitationFaild && <Error msg={\"Faild to send invitation\"} />}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import \"./post.css\";\nimport { useState, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { axiosJWT, Context } from \"../../context/Context\";\n\nexport default function Post({ post }) {\n  const postImg = post.img;\n  const userImg = post.userId.img;\n\n  const { user } = useContext(Context);\n  const [isLiked, setIsLiked] = useState(false);\n  const [likes, setLikes] = useState(post.likes.length);\n\n  const likeHandler = async () => {\n    setLikes(isLiked ? likes - 1 : likes + 1);\n    setIsLiked(!isLiked);\n    await axiosJWT({\n      method: \"put\",\n      url: `/api/v1/posts/${post._id}/like`,\n      headers: {\n        \"auth-token\": user.accessToken,\n      },\n    });\n  };\n\n  return (\n    <div className=\"post\">\n      <div className=\"postWrapper\">\n        <div className=\"postTop\">\n          <div className=\"postTopLeft\">\n            <Link to={`/profile/${post.userId._id}`}>\n              <img\n                className=\"postProfileImg\"\n                src={\n                  userImg\n                    ? `/images/users/${userImg}`\n                    : `/assets/images/noAvatar.png`\n                }\n                alt=\"userImg\"\n              />\n            </Link>\n            <div>\n              <Link to={`/profile/${post.userId._id}`}>\n                <span className=\"postUsername\">{post.userId.username}</span>\n              </Link>\n              <span className=\"postDate\">\n                {new Date(post.createdAt).toLocaleString()}\n              </span>\n            </div>\n          </div>\n        </div>\n        <Link\n          to={{\n            pathname: `/posts/${post._id}`,\n            state: { isLiked: isLiked },\n          }}\n        >\n          <div className=\"postCenter\">\n            <span className=\"postText\">{post.desc}</span>\n            {postImg && (\n              <img\n                className=\"postImg\"\n                src={`/images/posts/${postImg}`}\n                alt=\"postImg\"\n              />\n            )}\n          </div>\n        </Link>\n        <div className=\"postBottom\">\n          <div className=\"postBottomLeft\" onClick={likeHandler}>\n            <img className=\"likeIcon\" src={`/assets/images/like.png`} alt=\"\" />\n            <span className=\"postLikeCounter\">{likes}</span>\n          </div>\n          <Link\n            to={{\n              pathname: `/posts/${post._id}`,\n              state: { isLiked: isLiked },\n            }}\n          >\n            <div className=\"postBottomRight\">\n              <span className=\"postCommentText\">Comments</span>\n            </div>\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import \"./share.css\";\nimport { Context, axiosJWT } from \"../../context/Context\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { useRef, useState, useContext } from \"react\";\nimport { PermMedia, Cancel } from \"@material-ui/icons\";\n\nexport default function Share() {\n  const desc = useRef();\n  const { user } = useContext(Context);\n  const [file, setFile] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n\n    const newPost = {\n      userId: user._id,\n      desc: desc.current.value,\n    };\n    if (file || newPost.desc) {\n      setLoading(true);\n      if (file) {\n        const data = new FormData();\n        const fileName = `${Date.now()}_${file.name}`;\n        data.append(\"name\", fileName);\n        data.append(\"file\", file);\n        newPost.img = fileName;\n        console.log(newPost);\n        try {\n          await axiosJWT({\n            method: \"post\",\n            url: \"/api/v1/upload/images/posts\",\n            headers: {\n              \"auth-token\": user.accessToken,\n            },\n            data: data,\n          });\n        } catch (err) {\n          console.log(err);\n        }\n      }\n      try {\n        await axiosJWT.post(\"/api/v1/posts\", newPost, {\n          headers: {\n            \"auth-token\": user.accessToken,\n          },\n        });\n\n        setLoading(false);\n        window.location.reload();\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  };\n\n  return (\n    <div className=\"share\">\n      <div className=\"shareWrapper\">\n        <div className=\"shareTop\">\n          <img\n            className=\"shareProfileImg\"\n            src={\n              user.img\n                ? `/images/users/${user.img}`\n                : `/assets/images/noAvatar.png`\n            }\n            alt=\"userImg\"\n          />\n          <input placeholder=\"Write a post\" className=\"shareInput\" ref={desc} />\n        </div>\n        <hr className=\"shareHr\" />\n        {file && (\n          <div className=\"shareImgContainer\">\n            <img className=\"shareImg\" src={URL.createObjectURL(file)} alt=\"\" />\n            <Cancel className=\"shareCancelImg\" onClick={() => setFile(null)} />\n          </div>\n        )}\n        <form className=\"shareBottom\" onSubmit={submitHandler}>\n          <div className=\"shareOptions\">\n            <label htmlFor=\"file\" className=\"shareOption\">\n              <PermMedia htmlColor=\"#ec4747\" className=\"shareIcon\" />\n              <span className=\"shareOptionText\">Photo | Video</span>\n              <input\n                style={{ display: \"none\" }}\n                type=\"file\"\n                id=\"file\"\n                accept=\".png,.jpeg,.jpg\"\n                onChange={(e) => setFile(e.target.files[0])}\n              />\n            </label>\n          </div>\n          <button className=\"shareButton\" type=\"submit\" disabled={loading}>\n            Post\n          </button>\n        </form>\n      </div>\n      {loading && (\n        <div className=\"loading\">\n          <CircularProgress color=\"inherit\" size=\"25px\" />\n        </div>\n      )}\n    </div>\n  );\n}\n","import \"./feed.css\";\nimport axios from \"axios\";\nimport Post from \"../post/Post\";\nimport Share from \"../share/Share\";\nimport { useState, useEffect, useContext } from \"react\";\nimport { Context } from \"../../context/Context\";\n\nexport default function Feed({ share, profile }) {\n  const [posts, setPosts] = useState([]);\n  const { user } = useContext(Context);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      let res;\n      profile\n        ? (res = await axios.get(`/api/v1/posts/user/${profile}`))\n        : (res = await axios.get(`/api/v1/posts/timeline/${user._id}`));\n      setPosts(res.data);\n    };\n    fetchPosts();\n  }, [user._id, profile]);\n  return (\n    <div className=\"feed\">\n      <div className=\"feedWrapper\">\n        {share && <Share />}\n        {posts.length > 0 ? (\n          posts.map((p) => <Post key={p._id} post={p} />)\n        ) : (\n          <div>No posts</div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import \"./online.css\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Online({ user }) {\n  const userImg = user?.img;\n\n  return (\n    <Link to={`/profile/${user?._id}`}>\n      <li className=\"rightbarFriend\">\n        <div className=\"rightbarProfileImgContainer\">\n          <img\n            className=\"rightbarProfileImg\"\n            src={\n              userImg\n                ? `/images/users/${userImg}`\n                : `/assets/images/noAvatar.png`\n            }\n            alt=\"userImg\"\n          />\n          <div className=\"rightbarOnline\" title=\"Online now\" />\n        </div>\n        <span className=\"rightbarUsername\">{user?.username}</span>\n      </li>\n    </Link>\n  );\n}\n","import \"./rightbar.css\";\nimport axios from \"axios\";\nimport Online from \"../online/Online\";\nimport Friend from \"../friend/Friend\";\nimport { Context } from \"../../context/Context\";\nimport { useState, useEffect, useContext } from \"react\";\n\nexport default function Rightbar({\n  user,\n  home,\n  online,\n  hideImg,\n  userFriends,\n  onlineFriends,\n}) {\n  const [friends, setFriends] = useState([]);\n  let { user: auth } = useContext(Context);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const res = await axios.get(`/api/v1/users/friends/${auth._id}`);\n      setFriends(res.data);\n    };\n    fetchPosts();\n  }, [auth._id]);\n\n  const filterFriends = onlineFriends?.map((friend) =>\n    friends.find((f) => f._id === friend.userId)\n  );\n\n  const HomeRightbar = () => {\n    return (\n      <>\n        {!hideImg && (\n          <img className=\"rightbarAd\" src={\"/assets/images/ad.jpg\"} alt=\"\" />\n        )}\n        <h4 className=\"rightbarTitle\">Friends</h4>\n        <div className=\" rightbarFriendList\">\n          {friends.length > 0\n            ? friends.map((u) => <Friend key={u._id} user={u} />)\n            : \"No friends\"}\n        </div>\n      </>\n    );\n  };\n\n  const ProfileRightbar = () => {\n    return (\n      <>\n        <div className=\"btn-container\"></div>\n        <h4 className=\"rightbarTitle\">friends</h4>\n        {userFriends?.length > 0 ? (\n          <div className=\"rightbarFollowings\">\n            {userFriends.map((u) => (\n              <Friend key={u._id} user={u} />\n            ))}\n          </div>\n        ) : (\n          <div className=\"feedWrapper\">No friends</div>\n        )}\n      </>\n    );\n  };\n\n  const OnlineRightbar = () => {\n    return (\n      <>\n        <div className=\"btn-container\"></div>\n        {filterFriends?.length > 0 ? (\n          <>\n            <h4 className=\"rightbarTitle\">Online friends</h4>\n            <div className=\"rightbarFollowings\">\n              {filterFriends?.map((u) => (\n                <Online key={u?._id} user={u} />\n              ))}\n            </div>\n          </>\n        ) : (\n          <p className=\"no-online\">No online friends</p>\n        )}\n      </>\n    );\n  };\n\n  return (\n    <div className=\"rightbar\">\n      <div className=\"rightbarWrapper\">\n        {user && <ProfileRightbar />}\n        {home && <HomeRightbar />}\n        {online && <OnlineRightbar />}\n      </div>\n    </div>\n  );\n}\n","import Topbar from \"../../components/topbar/Topbar\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport Feed from \"../../components/feed/Feed\";\nimport Rightbar from \"../../components/rightbar/Rightbar\";\nimport \"./home.css\";\n\nexport default function Home() {\n  return (\n    <>\n      <Topbar />\n      <div className=\"homeContainer\">\n        <Sidebar />\n        <Feed share={true} />\n        <Rightbar home={true} />\n      </div>\n    </>\n  );\n}\n","import \"./voice.css\";\nimport { format } from \"timeago.js\";\n\nexport default function Voice({ src, own, time }) {\n  return (\n    <>\n      <div\n        className={\n          (own\n            ? \"justify-content-end main-audio-bg\"\n            : \"justify-content-start\") + \" position-relative d-flex  mb-4\"\n        }\n      >\n        <audio src={src} controls></audio>\n        <span className={own ? \"msg_time_send\" : \"msg_time\"}>\n          {format(time)}\n        </span>\n      </div>\n    </>\n  );\n}\n","import \"./record.css\";\nimport { useRef, useState, useContext } from \"react\";\nimport { axiosJWT, Context } from \"../../context/Context\";\nimport { Mic, Stop } from \"@material-ui/icons\";\n\nexport default function Record({\n  conversationId,\n  setMessages,\n  messages,\n  emitMessage,\n}) {\n  const stopButtonRef = useRef(null);\n  const { user } = useContext(Context);\n  const [startRecord, setStartRecord] = useState(false);\n\n  const startRecording = () => {\n    navigator.mediaDevices\n      .getUserMedia({ audio: true })\n      .then(function (stream) {\n        setStartRecord(true);\n        const options = { mimeType: \"audio/webm\" };\n        const recordedChunks = [];\n        const mediaRecorder = new MediaRecorder(stream, options);\n\n        mediaRecorder.addEventListener(\"dataavailable\", (e) => {\n          if (e.data.size > 0) recordedChunks.push(e.data);\n        });\n\n        mediaRecorder.addEventListener(\"stop\", async () => {\n          let blob = new Blob(recordedChunks, { type: \"audio/mp3;\" });\n          if (blob) {\n            const data = new FormData();\n            const fileName = `${Date.now()}_${user._id}.mp3`;\n            data.append(\"name\", fileName);\n            data.append(\"file\", blob);\n            const voiceMsg = {\n              sender: user._id,\n              content: fileName,\n              conversationId,\n            };\n\n            try {\n              // Upload voice\n              await axiosJWT({\n                method: \"post\",\n                url: \"/api/v1/upload/voices\",\n                headers: {\n                  \"auth-token\": user.accessToken,\n                },\n                data: data,\n              });\n              // Post message\n              let res = await axiosJWT({\n                method: \"post\",\n                url: \"/api/v1/messages\",\n                headers: {\n                  \"auth-token\": user.accessToken,\n                },\n                data: voiceMsg,\n              });\n              emitMessage(fileName);\n              setMessages([...messages, res.data]);\n            } catch (err) {\n              console.log(err);\n            }\n          }\n        });\n\n        stopButtonRef?.current?.addEventListener(\n          \"click\",\n          function onStopClick() {\n            setStartRecord(false);\n            mediaRecorder.stop();\n            this.removeEventListener(\"click\", onStopClick);\n          }\n        );\n        mediaRecorder.start();\n      });\n  };\n\n  return (\n    <>\n      <div className=\"record-wrapper\">\n        {startRecord ? (\n          <div ref={stopButtonRef} className=\"voice-record\">\n            <Stop className=\"fs-inherit\" />\n          </div>\n        ) : (\n          <div className=\"voice-record\" onClick={startRecording}>\n            <Mic className=\"fs-inherit\" />\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n","import \"./message.css\";\nimport { format } from \"timeago.js\";\n\nexport default function Message({ own, msg }) {\n  return (\n    <>\n      <div\n        className={\n          (own ? \"justify-content-end\" : \"justify-content-start\") +\n          \" position-relative d-flex  mb-4\"\n        }\n      >\n        <div className={own ? \"msg_cotainer_send\" : \"msg_cotainer\"}>\n          {msg.content}\n        </div>\n        <span className={own ? \"msg_time_send\" : \"msg_time\"}>\n          {format(msg.createdAt)}\n        </span>\n      </div>\n    </>\n  );\n}\n","import \"./chat.css\";\n\nimport axios from \"axios\";\nimport { v1 as uuid } from \"uuid\";\nimport { io } from \"socket.io-client\";\nimport Button from \"@material-ui/core/Button\";\nimport { Context, axiosJWT } from \"../../context/Context\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { Send, Videocam, Phone } from \"@material-ui/icons\";\nimport { useContext, useEffect, useState, useRef } from \"react\";\nimport { CircularProgress, IconButton } from \"@material-ui/core\";\n\n// Import components\nimport Voice from \"../../components/voice/Voice\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport Record from \"../../components/record/Record\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport Message from \"../../components/message/Message\";\nimport Rightbar from \"../../components/rightbar/Rightbar\";\n\nexport default function Chat() {\n  const socket = useRef();\n  const { friendId } = useParams();\n  const { user } = useContext(Context);\n  const [friend, setFriend] = useState();\n  const [loading, setLoading] = useState(false);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n\n  // Messages\n  const messagesEndRef = useRef();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState();\n  const [conversation, setConversation] = useState(0);\n  const [arrivalMessage, setArrivalMessage] = useState(null);\n\n  // Call\n  const [callId, setCallId] = useState(uuid());\n  const [callType, setCallType] = useState(\"\");\n  const [offerCall, setOfferCall] = useState(false);\n\n  // Get Friend data\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res1 = await axios.get(`/api/v1/users/${friendId}`);\n        setFriend(res1.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchData();\n  }, [friendId]);\n\n  // Get Conversation\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res2 = await axios.get(\n          `/api/v1/conversations/find/${friendId}/${user._id}`\n        );\n        setConversation(res2.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchData();\n  }, [user, friendId]);\n\n  // Get Messages\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res3 = await axiosJWT({\n          method: \"get\",\n          url: `/api/v1/messages/${conversation?._id}`,\n          headers: {\n            \"auth-token\": user.accessToken,\n          },\n        });\n        setMessages(res3.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchData();\n  }, [conversation, user]);\n\n  // Realtime Chat with Web Wocket\n  useEffect(() => {\n    socket.current = io(\"/\");\n\n    socket.current.on(\"getMessage\", (data) => {\n      setArrivalMessage({\n        sender: data.senderId,\n        content: data.content,\n        createdAt: Date.now(),\n      });\n    });\n  }, []);\n\n  // Set new messages\n  useEffect(() => {\n    arrivalMessage && setMessages((prev) => [...prev, arrivalMessage]);\n  }, [arrivalMessage]);\n\n  // Offer call\n  useEffect(() => {\n    socket.current.on(\"offering call\", (data) => {\n      setOfferCall(true);\n      setCallType(data.callType);\n      setCallId(data.callId);\n    });\n  }, []);\n\n  // Get online friends\n  useEffect(() => {\n    socket.current.emit(\"addUser\", user._id);\n    socket.current.on(\"getUsers\", (users) => {\n      setOnlineUsers(users.filter((u) => u.userId !== user._id));\n    });\n  }, [user]);\n\n  // emit new message\n  const emitMessage = (newMsg) => {\n    socket.current.emit(\"sendMessage\", {\n      senderId: user._id,\n      receiverId: friendId,\n      content: newMsg,\n    });\n  };\n\n  // Send message\n  const sendMessage = async (e) => {\n    e.preventDefault();\n    if (newMessage) {\n      setLoading(true);\n\n      const msg = {\n        sender: user._id,\n        content: newMessage,\n        conversationId: conversation._id,\n      };\n\n      emitMessage(newMessage);\n\n      try {\n        let res = await axiosJWT({\n          method: \"post\",\n          url: \"/api/v1/messages\",\n          headers: {\n            \"auth-token\": user.accessToken,\n          },\n          data: msg,\n        });\n        setMessages([...messages, res.data]);\n        setLoading(false);\n        setNewMessage(\"\");\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  };\n\n  // Call user\n  const callUser = (type) => {\n    socket.current.emit(\"offering call\", { friendId, callType: type, callId });\n  };\n\n  // Answer call\n  const answerCall = () => {\n    console.log(callType);\n    let url;\n    callType === \"video\"\n      ? (url = `/room/video/${callId}`)\n      : (url = `/room/voice/${callId}`);\n\n    // Open room url in new tab\n    const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\");\n    if (newWindow) newWindow.opener = null;\n\n    // Reset states\n    setOfferCall(false);\n    setCallType(\"\");\n    setCallId(uuid());\n  };\n\n  // Cancel call\n  const cancelCall = () => {\n    setOfferCall(false);\n    socket.current.emit(\"canceling call\", user.username);\n  };\n\n  // Scroll to last message\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"nearest\",\n    });\n  };\n  useEffect(scrollToBottom, [messages]);\n\n  // Render messages\n  const renderMessages = (msg) => {\n    let own = msg.sender === user._id;\n    if (msg?.content?.endsWith(\".mp3\"))\n      return (\n        <Voice\n          key={msg._id}\n          src={`/voices/${msg.content}`}\n          own={own}\n          time={msg.createdAt}\n        />\n      );\n    return <Message key={msg._id} msg={msg} own={own} />;\n  };\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"chatContainer\">\n        <Sidebar />\n        <div className=\"container-fluid my-1\">\n          <div className=\"row justify-content-center h-100\">\n            {loading && (\n              <div className=\"loading\">\n                <CircularProgress color=\"inherit\" size=\"20px\" />\n              </div>\n            )}\n            <div className=\"col-md-8 col-xl-6 chat\">\n              {offerCall && (\n                <div className=\"caller\">\n                  <div className=\"content\">\n                    <h4 className=\"text-center h4-fs\">\n                      {friend.username} is calling...\n                    </h4>\n                    <div className=\"call-btns\">\n                      <Button\n                        variant=\"contained\"\n                        color=\"secondary\"\n                        className=\"end-btn\"\n                        onClick={cancelCall}\n                      >\n                        Cancel\n                      </Button>\n                      <Button\n                        variant=\"contained\"\n                        className=\"bg-green m-1\"\n                        onClick={answerCall}\n                      >\n                        Answer\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              )}\n              <div className=\"card card-chat\">\n                {friend && (\n                  <div className=\"card-header msg_head\">\n                    <div className=\"d-flex bd-highlight\">\n                      <div className=\"img_cont\">\n                        <Link to={`/profile/${friendId}`}>\n                          <img\n                            src={\n                              friend.img\n                                ? `/images/users/${friend.img}`\n                                : `/assets/images/noAvatar.png`\n                            }\n                            className=\"rounded-circle user_img\"\n                            alt=\"\"\n                          />\n                          {onlineUsers.find((o) => o.userId === friendId) && (\n                            <div\n                              className=\"rightbarOnlineLg\"\n                              title=\"Online now\"\n                            />\n                          )}\n                        </Link>\n                      </div>\n                      <div className=\"user_info\">\n                        <span>\n                          <Link\n                            to={`/profile/${friendId}`}\n                            className=\"pro-link\"\n                          >\n                            {friend.username}\n                          </Link>\n                        </span>\n                        <p>Private chat</p>\n                      </div>\n                      <div className=\"call-btns ml-1\">\n                        <Link to={`/room/voice/${callId}`} target=\"_blank\">\n                          <IconButton\n                            className=\"color-blue f-start\"\n                            title=\"Start a Voice call\"\n                            aria-label=\"call\"\n                            onClick={() => {\n                              callUser(\"voice\");\n                            }}\n                          >\n                            <Phone className=\"color-blue fs-2\" />\n                          </IconButton>\n                        </Link>\n                        <Link to={`/room/video/${callId}`} target=\"_blank\">\n                          <IconButton\n                            className=\"color-blue f-start\"\n                            title=\"Start a Video call\"\n                            aria-label=\"call\"\n                            onClick={() => {\n                              callUser(\"video\");\n                            }}\n                          >\n                            <Videocam className=\"color-blue fs-2\" />\n                          </IconButton>\n                        </Link>\n                      </div>\n                    </div>\n                  </div>\n                )}\n                <div id=\"message-container\" className=\"card-body msg_card_body\">\n                  {messages.map((m) => renderMessages(m))}\n                  <div ref={messagesEndRef} />\n                </div>\n                <div className=\"card-footer\">\n                  <div className=\"input-group\">\n                    <textarea\n                      id=\"message\"\n                      name=\"msg-input\"\n                      className=\"form-control type_msg textarea-bd\"\n                      placeholder=\"Write your message...\"\n                      maxLength=\"10000\"\n                      value={newMessage}\n                      onChange={(e) => setNewMessage(e.target.value)}\n                      autoFocus\n                    ></textarea>\n                    <button\n                      id=\"sendBtn\"\n                      className=\"input-group-append  justify-content-end d-flex send-btn\"\n                      disabled={loading}\n                      onClick={(e) => sendMessage(e)}\n                    >\n                      <span className=\"input-group-text send_btn bg-white color-main\">\n                        <Send />\n                      </span>\n                    </button>\n                    <Record\n                      conversationId={conversation._id}\n                      setMessages={setMessages}\n                      messages={messages}\n                      emitMessage={emitMessage}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <Rightbar hideImg={true} online={true} onlineFriends={onlineUsers} />\n      </div>\n    </>\n  );\n}\n","import \"./video.css\";\nimport { useEffect, useRef } from \"react\";\n\nconst Video = ({ peer, style }) => {\n  const friendVideo = useRef();\n\n  useEffect(() => {\n    peer.on(\"stream\", (stream) => {\n      friendVideo.current.srcObject = stream;\n    });\n  }, [peer]);\n\n  return (\n    <video\n      playsInline\n      autoPlay\n      ref={friendVideo}\n      className=\"h-40 w-50\"\n      style={style}\n    />\n  );\n};\n\nexport default Video;\n","import \"./room.css\";\nimport Peer from \"simple-peer\";\nimport io from \"socket.io-client\";\nimport { useParams } from \"react-router-dom\";\nimport Button from \"@material-ui/core/Button\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\n// Import components\nimport Video from \"../../components/video/Video\";\nimport Topbar from \"../../components/topbar/Topbar\";\n\nconst videoConstraints = {\n  height: window.innerHeight / 2,\n  width: window.innerWidth / 2,\n};\n\nexport default function Room() {\n  const socketRef = useRef();\n  const userVideo = useRef();\n  const peersRef = useRef([]);\n  const { type, roomID } = useParams();\n  const [peers, setPeers] = useState([]);\n  const [joined, setJoined] = useState(false);\n  const [waiting, setWaiting] = useState(true);\n  const [friendName, setFriendName] = useState(\"\");\n  const [canceling, setCanceling] = useState(false);\n\n  useEffect(() => {\n    // Socket connection\n    socketRef.current = io.connect(\"/\");\n\n    // Get user permissions\n    navigator.mediaDevices\n      .getUserMedia(\n        type === \"video\"\n          ? { video: videoConstraints, audio: true }\n          : { audio: true }\n      )\n      .then((stream) => {\n        userVideo.current.srcObject = stream;\n\n        // Join room\n        socketRef.current.emit(\"join room\", roomID);\n\n        // Get room users\n        socketRef.current.on(\"all users\", (users) => {\n          const peers = [];\n          users.forEach((userID) => {\n            const peer = createPeer(userID, socketRef.current.id, stream);\n            peersRef.current.push({\n              peerID: userID,\n              peer,\n            });\n            peers.push(peer);\n          });\n          setPeers(peers);\n        });\n\n        // When new user join room\n        socketRef.current.on(\"user joined\", (payload) => {\n          setWaiting(false);\n          setJoined(true);\n          const peer = addPeer(payload.signal, payload.callerID, stream);\n          peersRef.current.push({\n            peerID: payload.callerID,\n            peer,\n          });\n\n          setPeers((users) => [...users, peer]);\n        });\n\n        // When receive returned signal\n        socketRef.current.on(\"receiving returned signal\", (payload) => {\n          setWaiting(false);\n\n          const item = peersRef.current.find((p) => p.peerID === payload.id);\n          item.peer.signal(payload.signal);\n        });\n      });\n  }, [roomID, type]);\n\n  useEffect(() => {});\n\n  // When user cancel call\n  useEffect(() => {\n    socketRef.current.on(\"canceling call\", (name) => {\n      setFriendName(name);\n      setCanceling(true);\n    });\n  }, []);\n\n  // Create new peer\n  const createPeer = (userToSignal, callerID, stream) => {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream,\n    });\n\n    peer.on(\"signal\", (signal) => {\n      socketRef.current.emit(\"sending signal\", {\n        userToSignal,\n        callerID,\n        signal,\n      });\n    });\n\n    return peer;\n  };\n\n  // Add peer\n  const addPeer = (incomingSignal, callerID, stream) => {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream,\n    });\n\n    peer.on(\"signal\", (signal) => {\n      setWaiting(false);\n\n      socketRef.current.emit(\"returning signal\", { signal, callerID });\n    });\n\n    peer.signal(incomingSignal);\n\n    return peer;\n  };\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"room-container\">\n        {type === \"video\" ? <h4>Video Call</h4> : <h4>Voice Call</h4>}\n        {canceling && (\n          <p className=\"alert-danger fs-25\">{friendName} canceled the call</p>\n        )}\n        {joined && <p className=\"fs-25 color-main\">Your friend joined</p>}\n        {waiting && !canceling && (\n          <p className=\"fs-25 color-main\">\n            Just wait until your friend join ...\n          </p>\n        )}\n        {peers.map((peer, index) => (\n          <Video\n            key={index}\n            peer={peer}\n            style={type === \"voice\" ? { display: \"none\" } : null}\n          />\n        ))}\n        {type === \"voice\" && <img src={\"/assets/images/signal.gif\"} alt=\"\" />}\n        <div className=\"videos\">\n          <video\n            muted\n            ref={userVideo}\n            autoPlay\n            playsInline\n            style={type === \"voice\" ? { display: \"none\" } : null}\n            className=\"user-video\"\n          />\n        </div>\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          className=\"end-btn mb-1\"\n          onClick={() => window.close()}\n        >\n          End Call\n        </Button>\n      </div>\n    </>\n  );\n}\n","import { Link } from \"react-router-dom\";\nimport \"./userCard.css\";\n\nconst PF = process.env.REACT_APP_PUBLIC_FOLDER;\n\nconst UserCard = ({ user }) => {\n  return (\n    <div className=\"user-chat-card mb-2\">\n      <img\n        src={\n          user.profilePicture ? PF + user.img : \"/assets/images/noAvatar.png\"\n        }\n        alt=\"user\"\n      />\n      <div className=\"container\">\n        <h5>{user.username}</h5>\n        <Link to={`/chat/${user._id}`} className=\"btn btn-chat\">\n          Chat\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default UserCard;\n","import \"./chats.css\";\nimport axios from \"axios\";\nimport { Context } from \"../../context/Context\";\nimport { useState, useEffect, useContext } from \"react\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport UserCard from \"../../components/userCard/UserCard\";\n\nexport default function Chats() {\n  const [friends, setFriends] = useState([]);\n  let { user: auth } = useContext(Context);\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const res = await axios.get(`/api/v1/users/friends/${auth._id}`);\n      setFriends(res.data);\n    };\n    fetchPosts();\n  }, [auth._id]);\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"chatsContainer\">\n        <Sidebar />\n        <div className=\"chats\">\n          <div className=\"chatsHeader\">\n            <p className=\"mb-1\">Get in Touch </p>\n            <p> Start Chat Your Friends</p>\n          </div>\n          <div className=\"users\">\n            {friends.length > 0 &&\n              friends.map((u) => <UserCard key={u._id} user={u} />)}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","import \"./login.css\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { useContext, useRef, useState } from \"react\";\nimport { Context } from \"../../context/Context\";\nimport Error from \"../../components/error/Error\";\nimport { CircularProgress } from \"@material-ui/core\";\n\nexport default function Login() {\n  const email = useRef();\n  const password = useRef();\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const { isFetching, dispatch, error } = useContext(Context);\n  const handleForm = async (e) => {\n    e.preventDefault();\n    dispatch({ type: \"LOGIN_START\" });\n    try {\n      let res = await axios.post(\"/api/v1/auth/login\", {\n        email: email.current.value,\n        password: password.current.value,\n      });\n      dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\n      window.location.replace(\"/\");\n    } catch (err) {\n      dispatch({ type: \"LOGIN_FAILURE\" });\n      if (err.response.status === 500) {\n        setErrorMsg(\"Somthing went wrong!\");\n      } else {\n        setErrorMsg(\"Invalid email or password\");\n      }\n    }\n  };\n\n  document.body.style.backgroundColor = \"#0080ff\";\n\n  return (\n    <div className=\"login-page\">\n      <div className=\"login-container\">\n        <div className=\"login-icon\">Kids Social</div>\n        <div className=\"login-form\">\n          <div className=\"login-title\">Log In</div>\n          <form onSubmit={handleForm}>\n            <input\n              className=\"login-input\"\n              placeholder=\"Email\"\n              type=\"email\"\n              required\n              ref={email}\n            />\n            <input\n              className=\"login-input\"\n              placeholder=\"Password\"\n              type=\"password\"\n              minLength=\"6\"\n              required\n              ref={password}\n            />\n            <button\n              className=\"login-input button\"\n              type=\"submit\"\n              disabled={isFetching}\n            >\n              {isFetching ? (\n                <CircularProgress color=\"#fff\" size=\"20px\" />\n              ) : (\n                \"Log In\"\n              )}\n            </button>\n            {error && <Error msg={errorMsg} />}\n          </form>\n        </div>\n        <div className=\"login-signup\">\n          Don't have an account?\n          <Link to={\"/register\"}>Sign Up</Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import \"./profile.css\";\nimport axios from \"axios\";\nimport Feed from \"../../components/feed/Feed\";\nimport { Link, useParams } from \"react-router-dom\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { Context, axiosJWT } from \"../../context/Context\";\nimport Rightbar from \"../../components/rightbar/Rightbar\";\n\nexport default function Profile() {\n  const { userId } = useParams();\n  const { user } = useContext(Context);\n\n  const [auth, setAuth] = useState();\n  const [profile, setProfile] = useState();\n  const [loading, setLoading] = useState(false);\n\n  const userImg = profile?.img;\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        // Get profile user\n        const res1 = await axios.get(`/api/v1/users/${userId}`);\n        setProfile(res1.data);\n\n        // Get auth user\n        const res2 = await axios.get(`/api/v1/users/${user._id}`);\n        setAuth(res2.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchUser();\n  }, [userId, user._id]);\n\n  const confirmHandler = async () => {\n    setLoading(true);\n    await axiosJWT({\n      method: \"put\",\n      url: `/api/v1/users/${profile._id}/accept`,\n      headers: {\n        \"auth-token\": user.accessToken,\n      },\n    });\n    setLoading(false);\n    window.location.reload();\n  };\n\n  const addHandler = async () => {\n    setLoading(true);\n    await axiosJWT({\n      method: \"put\",\n      url: `/api/v1/users/${profile._id}/add`,\n      headers: {\n        \"auth-token\": user.accessToken,\n      },\n    });\n    setLoading(false);\n    window.location.reload();\n  };\n\n  const cancelHandler = async () => {\n    setLoading(true);\n    await axiosJWT({\n      method: \"delete\",\n      url: `/api/v1/users/${profile._id}/cancel`,\n      headers: {\n        \"auth-token\": user.accessToken,\n      },\n    });\n    setLoading(false);\n    window.location.reload();\n  };\n\n  const deleteHandler = async () => {\n    setLoading(true);\n    await axiosJWT({\n      method: \"delete\",\n      url: `/api/v1/users/${profile._id}/reject`,\n      headers: {\n        \"auth-token\": user.accessToken,\n      },\n    });\n    setLoading(false);\n    window.location.reload();\n  };\n\n  const unfriendHandler = async () => {\n    setLoading(true);\n    await axiosJWT({\n      method: \"put\",\n      url: `/api/v1/users/${profile._id}/delete`,\n      headers: {\n        \"auth-token\": user.accessToken,\n      },\n    });\n    setLoading(false);\n    window.location.reload();\n  };\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"profile\">\n        <Sidebar />\n        {profile && auth && (\n          <div className=\"profileRight\">\n            <div className=\"profileRightTop\">\n              <div className=\"profileCover\">\n                <img\n                  className=\"profileUserImg\"\n                  src={\n                    userImg\n                      ? `/images/users/${userImg}`\n                      : `/assets/images/noAvatar.png`\n                  }\n                  alt=\"userImg\"\n                />\n              </div>\n              <div className=\"profileInfo\">\n                <h4 className=\"profileInfoName\">{profile.username}</h4>\n              </div>\n            </div>\n            {user._id !== profile._id && (\n              <div className=\"btn-container\">\n                {auth.friends.find((u) => u._id === profile._id) ? (\n                  <>\n                    <button\n                      onClick={unfriendHandler}\n                      disabled={loading}\n                      className=\"btn btn-red\"\n                    >\n                      Unfriend\n                    </button>\n                    <button disabled={loading} className=\"btn btn-confirm\">\n                      <Link to={`/chat/${userId}`} className=\"color-light\">\n                        Chat\n                      </Link>\n                    </button>\n                  </>\n                ) : auth.sentRequests.find((u) => u._id === profile._id) ? (\n                  <button\n                    onClick={cancelHandler}\n                    disabled={loading}\n                    className=\"btn btn-red\"\n                  >\n                    Cancel\n                  </button>\n                ) : auth.friendRequests.find((u) => u._id === profile._id) ? (\n                  <>\n                    <button\n                      onClick={confirmHandler}\n                      disabled={loading}\n                      className=\"btn btn-confirm\"\n                    >\n                      Confirm\n                    </button>\n                    <button\n                      onClick={deleteHandler}\n                      disabled={loading}\n                      className=\"btn btn-delete\"\n                    >\n                      Delete\n                    </button>\n                  </>\n                ) : (\n                  <button\n                    onClick={addHandler}\n                    disabled={loading}\n                    className=\" btn btn-confirm\"\n                  >\n                    Add\n                  </button>\n                )}\n              </div>\n            )}\n            {loading && (\n              <div className=\"loading\">\n                <CircularProgress color=\"inherit\" size=\"20px\" />\n              </div>\n            )}\n            <div className=\"profileRightBottom\">\n              <Rightbar user={true} userFriends={profile.friends} />\n              <h4 className=\"rightbarTitle\">Posts</h4>\n              <Feed share={false} profile={userId} />\n            </div>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n","import \"./settings.css\";\nimport { useContext, useState } from \"react\";\nimport { Context, axiosJWT } from \"../../context/Context\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { Edit } from \"@material-ui/icons\";\n\n// Import components\nimport Error from \"../../components/error/Error\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\n\nexport default function Settings() {\n  const { user, dispatch } = useContext(Context);\n  const [email, setEmail] = useState(user?.email);\n  const [username, setUsername] = useState(user?.username);\n  const [file, setFile] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState({\n    isError: false,\n    msg: \"\",\n  });\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setSuccess(false);\n    setError({ isError: false, msg: \"\" });\n    dispatch({ type: \"UPDATE_START\" });\n    const updatedUser = {\n      username,\n      email,\n    };\n    if (file) {\n      const data = new FormData();\n      const filename = Date.now() + file.name;\n      data.append(\"name\", filename);\n      data.append(\"file\", file);\n      updatedUser.img = filename;\n      try {\n        await axiosJWT({\n          method: \"post\",\n          url: \"/api/v1/upload/images/users\",\n          headers: {\n            \"auth-token\": user.accessToken,\n          },\n          data: data,\n        });\n      } catch (err) {\n        dispatch({ type: \"UPDATE_FAILURE\" });\n        setLoading(false);\n        setSuccess(false);\n      }\n    }\n    try {\n      const res = await axiosJWT({\n        method: \"put\",\n        url: `/api/v1/users/${user._id}`,\n        headers: {\n          \"auth-token\": user.accessToken,\n        },\n        data: updatedUser,\n      });\n      setLoading(false);\n      setSuccess(true);\n      dispatch({ type: \"UPDATE_SUCCESS\", payload: res.data });\n    } catch (err) {\n      setLoading(false);\n      setSuccess(false);\n      dispatch({ type: \"UPDATE_FAILURE\" });\n      if (err.response.status === 409) {\n        setError({ isError: true, msg: \"Email is already used\" });\n      } else {\n        setError({ isError: true, msg: \"Somthing went wrong!\" });\n      }\n    }\n  };\n  return (\n    <>\n      <Topbar />\n      <div className=\"settingsContainer\">\n        <Sidebar />\n        <div className=\"settingsWrapper\">\n          {loading && (\n            <div className=\"loading\">\n              <CircularProgress color=\"inherit\" size=\"20px\" />\n            </div>\n          )}\n          <form className=\"settingsForm\" onSubmit={handleSubmit}>\n            <div className=\"settingsPP\">\n              <img\n                className=\"\"\n                src={\n                  file\n                    ? URL.createObjectURL(file)\n                    : user.img\n                    ? \"/images/users/\" + user.img\n                    : `/assets/images/noAvatar.png`\n                }\n                alt=\"\"\n              />\n              <label htmlFor=\"fileInput\">\n                <span className=\"settingsPPIcon \">\n                  <Edit className=\"color-green edit-icon\" />\n                </span>\n              </label>\n              <input\n                type=\"file\"\n                id=\"fileInput\"\n                accept=\".png,.jpeg,.jpg\"\n                style={{ display: \"none\" }}\n                onChange={(e) => setFile(e.target.files[0])}\n              />\n            </div>\n            <label>Name</label>\n            <input\n              type=\"text\"\n              minLength={3}\n              maxLength={20}\n              placeholder={user.username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n            <label>Email</label>\n            <input\n              type=\"email\"\n              placeholder={user.email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <div className=\"btn-container\">\n              <button\n                disabled={loading}\n                type=\"submit\"\n                className=\"btn btn-confirm settingsSubmit\"\n              >\n                Update\n              </button>\n            </div>\n            {success && (\n              <span className=\"text-success\">Profile has been updated.</span>\n            )}\n            {error.isError && <Error msg={error.msg} />}\n          </form>\n        </div>\n      </div>\n    </>\n  );\n}\n","import \"./learning.css\";\nimport { Link } from \"react-router-dom\";\n\n// Import components\nimport Topbar from \"../../components/topbar/Topbar\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\n\nexport default function Learning() {\n  return (\n    <>\n      <Topbar />\n      <div className=\"learnContainer\">\n        <Sidebar />\n        <div className=\"learning-cards\">\n          <p className=\"learnHeader\">Reading Is Dreaming With Open Eyes</p>\n          <div className=\"card-grid\">\n            <Link className=\"card\" to=\"/learning/history\">\n              <div\n                className=\"card__background\"\n                style={{\n                  backgroundImage:\n                    \"url('/assets/images/categories/history.jpg')\",\n                }}\n              ></div>\n              <div className=\"card__content\">\n                <p className=\"card__category\">Category</p>\n                <h3 className=\"card__heading\">History</h3>\n              </div>\n            </Link>\n            <Link className=\"card\" to=\"/learning/science\">\n              <div\n                className=\"card__background\"\n                style={{\n                  backgroundImage:\n                    \"url('/assets/images/categories/science.jpg')\",\n                }}\n              ></div>\n              <div className=\"card__content\">\n                <p className=\"card__category\">Category</p>\n                <h3 className=\"card__heading\">Science</h3>\n              </div>\n            </Link>\n            <Link className=\"card\" to=\"/learning/space\">\n              <div\n                className=\"card__background\"\n                style={{\n                  backgroundImage: \"url('/assets/images/categories/space.jpg')\",\n                }}\n              ></div>\n              <div className=\"card__content\">\n                <p className=\"card__category\">Category</p>\n                <h3 className=\"card__heading\">Space</h3>\n              </div>\n            </Link>\n            <Link className=\"card\" to=\"/learning/images/programming\">\n              <div\n                className=\"card__background\"\n                style={{\n                  backgroundImage:\n                    \"url('/assets/images/categories/programming.jpg')\",\n                }}\n              ></div>\n              <div className=\"card__content\">\n                <p className=\"card__category\">Category</p>\n                <h3 className=\"card__heading\">Programming</h3>\n              </div>\n            </Link>\n            <div></div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","import \"./register.css\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { useState, useRef } from \"react\";\nimport Error from \"../../components/error/Error\";\nimport { CircularProgress } from \"@material-ui/core\";\n\nexport default function Register() {\n  const username = useRef();\n  const email = useRef();\n  const password = useRef();\n  const confirmPassword = useRef();\n\n  const [isLoading, setisLoading] = useState(false);\n\n  const [error, setError] = useState({\n    isError: false,\n    msg: \"\",\n  });\n  const handleForm = async (e) => {\n    e.preventDefault();\n    console.log(\"hi\", password.current.value, confirmPassword.current.value);\n    if (password.current.value !== confirmPassword.current.value) {\n      return setError({ isError: true, msg: \"Passwords are not the same\" });\n    }\n    setisLoading(true);\n    setError({ isError: false, msg: \"\" });\n\n    try {\n      let res = await axios.post(\"/api/v1/auth/register\", {\n        username: username.current.value,\n        email: email.current.value,\n        password: password.current.value,\n      });\n      if (res.data) {\n        window.location.replace(\"/login\");\n        setisLoading(false);\n      }\n    } catch (err) {\n      setisLoading(false);\n      if (err.response.status === 409) {\n        setError({ isError: true, msg: \"Email is already used\" });\n      } else {\n        setError({ isError: true, msg: \"Somthing went wrong!\" });\n      }\n    }\n  };\n\n  document.body.style.backgroundColor = \"#0080ff\";\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-icon\">Kids Social</div>\n      <div className=\"login-form\">\n        <div className=\"login-title\">Sign Up</div>\n        <form onSubmit={handleForm}>\n          <input\n            className=\"login-input\"\n            placeholder=\"Name\"\n            type=\"text\"\n            required\n            ref={username}\n          />\n          <input\n            className=\"login-input\"\n            placeholder=\"Email\"\n            type=\"email\"\n            required\n            ref={email}\n          />\n          <input\n            className=\"login-input\"\n            placeholder=\"Password\"\n            type=\"password\"\n            required\n            ref={password}\n          />\n          <input\n            className=\"login-input\"\n            placeholder=\"Confirm Password\"\n            type=\"password\"\n            required\n            ref={confirmPassword}\n          />\n          <button\n            className=\"login-input button\"\n            type=\"submit\"\n            disabled={isLoading}\n          >\n            {isLoading ? (\n              <CircularProgress color=\"#fff\" size=\"20px\" />\n            ) : (\n              \"Sign Up\"\n            )}\n          </button>\n          {error.isError && <Error msg={error.msg} />}\n        </form>\n      </div>\n      <div className=\"login-signup\">\n        Have an account? <Link to={\"/login\"}>Log in</Link>\n      </div>\n    </div>\n  );\n}\n","import \"./request.css\";\nimport { Link } from \"react-router-dom\";\nimport { useState, useContext } from \"react\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { Context, axiosJWT } from \"../../context/Context\";\n\nconst Request = ({ request }) => {\n  const { user } = useContext(Context);\n  const userImg = request.img;\n  const [loading, setLoading] = useState(false);\n\n  const confirmHandler = async () => {\n    setLoading(true);\n    await axiosJWT({\n      method: \"put\",\n      url: `/api/v1/users/${request._id}/accept`,\n      headers: {\n        \"auth-token\": user.accessToken,\n      },\n    });\n    setLoading(false);\n    window.location.reload();\n  };\n\n  const deleteHandler = async () => {\n    setLoading(true);\n    await axiosJWT({\n      method: \"delete\",\n      url: `/api/v1/users/${request._id}/reject`,\n      headers: {\n        \"auth-token\": user.accessToken,\n      },\n    });\n    setLoading(false);\n    window.location.reload();\n  };\n\n  return (\n    <div className=\"request\">\n      <Link to={`/profile/${request._id}`}>\n        <img\n          className=\"req-img\"\n          src={\n            userImg ? `/images/users/${userImg}` : `/assets/images/noAvatar.png`\n          }\n          alt=\"userImg\"\n        />\n      </Link>\n      <div className=\"req-details\">\n        <Link to={`/profile/${request._id}`}>\n          <h3>{request.username}</h3>\n        </Link>\n        <div className=\"req-buttons\">\n          <button\n            onClick={confirmHandler}\n            disabled={loading}\n            className=\"btn btn-confirm\"\n          >\n            Confirm\n          </button>\n          <button\n            onClick={deleteHandler}\n            disabled={loading}\n            className=\"btn btn-delete\"\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n      {loading && (\n        <div className=\"loading\">\n          <CircularProgress color=\"inherit\" size=\"20px\" />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Request;\n","import \"./requests.css\";\nimport axios from \"axios\";\nimport { Context } from \"../../context/Context\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport Request from \"../../components/request/Request\";\nimport { useState, useEffect, useContext } from \"react\";\nimport Rightbar from \"../../components/rightbar/Rightbar\";\n\nexport default function Requests() {\n  const { user } = useContext(Context);\n  const [requests, setRequests] = useState([]);\n\n  useEffect(() => {\n    const fetchRequests = async () => {\n      const res = await axios.get(`/api/v1/users/friendRequests/${user._id}`);\n      setRequests(res.data);\n    };\n    fetchRequests();\n  }, [user._id]);\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"RequestsContainer\">\n        <Sidebar />\n        <div className=\"requests\">\n          {requests.length > 0 ? (\n            requests.map((req) => <Request key={req._id} request={req} />)\n          ) : (\n            <h4 className=\"h4-fs m-1\">No friend requests</h4>\n          )}\n        </div>\n        <Rightbar home={true} />\n      </div>\n    </>\n  );\n}\n","import \"./comment.css\";\nimport { useState, useContext } from \"react\";\nimport { Delete } from \"@material-ui/icons\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { Context, axiosJWT } from \"../../context/Context\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Comment({ comment }) {\n  const userImg = comment.userId.img;\n  const { user } = useContext(Context);\n  const [loading, setLoading] = useState(false);\n\n  const deleteHandler = async () => {\n    setLoading(true);\n    await axiosJWT({\n      method: \"delete\",\n      url: `/api/v1/comments/${comment._id}`,\n      headers: {\n        \"auth-token\": user.accessToken,\n      },\n    });\n    setLoading(false);\n    window.location.reload();\n  };\n\n  return (\n    <div className=\"comment\">\n      <Link to={`/profile/${comment.userId._id}`}>\n        <img\n          className=\"comment-img\"\n          src={\n            userImg ? `/images/users/${userImg}` : `/assets/images/noAvatar.png`\n          }\n          alt=\"userImg\"\n        />\n      </Link>\n      <div className=\"comment-details comment-bg\">\n        <Link to={`/profile/${comment.userId._id}`}>\n          <h4>{comment.userId.username}</h4>\n        </Link>\n        <div className=\"comment-body\">\n          <p>{comment.desc}</p>\n        </div>\n      </div>\n      {comment.userId._id === user._id && (\n        <Delete\n          htmlColor=\"red\"\n          className=\"postDeleteIcon\"\n          onClick={deleteHandler}\n        />\n      )}\n      {loading && (\n        <div className=\"loading\">\n          <CircularProgress color=\"inherit\" size=\"18px\" />\n        </div>\n      )}\n    </div>\n  );\n}\n","import \"./singlePost.css\";\nimport axios from \"axios\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Comment from \"../comment/Comment\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { useState, useEffect, useContext } from \"react\";\nimport { Context, axiosJWT } from \"../../context/Context\";\nimport { CommentSharp, Delete } from \"@material-ui/icons\";\n\nexport default function SinglePost({ post, liked }) {\n  const postImg = post.img;\n  const history = useHistory();\n  const userImg = post.userId.img;\n  const { user } = useContext(Context);\n\n  const [likes, setLikes] = useState(post.likes.length);\n  const [isLiked, setIsLiked] = useState(liked);\n  const [loading, setLoading] = useState(false);\n  const [comment, setComment] = useState();\n  const [comments, setComments] = useState([]);\n\n  useEffect(() => {\n    const fetchComments = async () => {\n      try {\n        const res = await axios.get(`/api/v1/comments/${post._id}`);\n        setComments(res.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchComments();\n  }, [post._id, loading]);\n\n  const likeHandler = async () => {\n    await axiosJWT({\n      method: \"put\",\n      url: `/api/v1/posts/${post._id}/like`,\n      headers: {\n        \"auth-token\": user.accessToken,\n      },\n    });\n    setLikes(isLiked ? likes - 1 : likes + 1);\n    setIsLiked(!isLiked);\n  };\n\n  const commentHandler = async () => {\n    if (comment.length > 0) {\n      setLoading(true);\n      const NewComment = { postId: post._id, desc: comment };\n      await axiosJWT({\n        method: \"post\",\n        url: \"/api/v1/comments\",\n        data: NewComment,\n        headers: {\n          \"auth-token\": user.accessToken,\n        },\n      });\n      setLoading(false);\n      setComment(\"\");\n    }\n  };\n\n  const deleteHandler = async () => {\n    setLoading(true);\n    await axiosJWT({\n      method: \"delete\",\n      url: `/api/v1/posts/${post._id}`,\n      headers: {\n        \"auth-token\": user.accessToken,\n      },\n    });\n    setLoading(false);\n    history.goBack();\n  };\n\n  return (\n    <div className=\"post\">\n      <div className=\"postWrapper\">\n        <div className=\"postTop\">\n          <div className=\"postTopLeft\">\n            <Link to={`/profile/${post.userId._id}`}>\n              <img\n                className=\"postProfileImg\"\n                src={\n                  userImg\n                    ? `/images/users/${userImg}`\n                    : `/assets/images/noAvatar.png`\n                }\n                alt=\"userImg\"\n              />\n            </Link>\n            <div>\n              <Link to={`/profile/${post.userId._id}`}>\n                <span className=\"postUsername\">{post.userId.username}</span>\n              </Link>\n              <span className=\"postDate\">\n                {new Date(post.createdAt).toLocaleString()}\n              </span>\n            </div>\n          </div>\n          {post.userId._id === user._id && (\n            <Delete\n              htmlColor=\"red\"\n              className=\"postDeleteIcon\"\n              onClick={deleteHandler}\n            />\n          )}\n        </div>\n        <div className=\"postCenter\">\n          <span className=\"postText\">{post.desc}</span>\n          {postImg && (\n            <img\n              className=\"postImg\"\n              src={`/images/posts/${postImg}`}\n              alt=\"postImg\"\n            />\n          )}\n        </div>\n        <div className=\"postBottom\">\n          <div className=\"postBottomLeft\">\n            <img\n              className=\"likeIcon\"\n              src={\"/assets/images/like.png\"}\n              onClick={likeHandler}\n              alt=\"\"\n            />\n            <span className=\"postLikeCounter\">{likes}</span>\n          </div>\n          <div className=\"postBottomRight\">\n            <span className=\"postCommentText\">Comments</span>\n          </div>\n        </div>\n        <div className=\"input-group mt-2 \">\n          <textarea\n            id=\"message\"\n            name=\"comment-input\"\n            style={{ resize: \"none\" }}\n            className=\"form-control type_msg textarea-bd comment-bg\"\n            placeholder=\"Write a comment...\"\n            value={comment}\n            onChange={(e) => {\n              setComment(e.target.value);\n            }}\n            maxLength=\"10000\"\n          ></textarea>\n          <div className=\"input-group-append  justify-content-end d-flex\">\n            <button\n              onClick={commentHandler}\n              disabled={loading}\n              className=\"input-group-text send_btn comment-bg color-main\"\n            >\n              <CommentSharp />\n            </button>\n          </div>\n        </div>\n        {loading && (\n          <div className=\"loading\">\n            <CircularProgress color=\"inherit\" size=\"25px\" />\n          </div>\n        )}\n        {comments.length > 0 &&\n          comments.map((c) => <Comment key={c._id} comment={c} />)}\n      </div>\n    </div>\n  );\n}\n","import axios from \"axios\";\nimport \"./postdetails.css\";\nimport { useParams } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport Topbar from \"../../components/topbar/Topbar\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport Rightbar from \"../../components/rightbar/Rightbar\";\nimport SinglePost from \"../../components/singlePost/SinglePost\";\n\nexport default function PostDetails({ location }) {\n  const { postId } = useParams();\n  const [post, setPost] = useState();\n\n  useEffect(() => {\n    const fetchPost = async () => {\n      try {\n        const res1 = await axios.get(`/api/v1/posts/${postId}`);\n        setPost(res1.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchPost();\n  }, [postId]);\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"postContainer\">\n        <Sidebar />\n        <div className=\"feed\">\n          <div className=\"feedWrapper\">\n            {post && <SinglePost post={post} liked={location.state.isLiked} />}\n          </div>\n        </div>\n        <Rightbar hideImg={false} home={true} />\n      </div>\n    </>\n  );\n}\n","export const Users = [\n  {\n    id: 1,\n    profilePicture: \"person/1.jpg\",\n    username: \"Relative 1\",\n  },\n  {\n    id: 2,\n    profilePicture: \"person/2.jpg\",\n    username: \"Relative 2\",\n    comment: \"Best family\",\n  },\n  {\n    id: 3,\n    profilePicture: \"person/3.jpg\",\n    username: \"Relative 3\",\n    comment: \"Nice picture\",\n  },\n  {\n    id: 4,\n    profilePicture: \"person/4.jpg\",\n    username: \"Relative 4\",\n    comment: \"I love my family\",\n  },\n  {\n    id: 5,\n    profilePicture: \"person/5.jpg\",\n    username: \"Relative 5\",\n  },\n  {\n    id: 6,\n    profilePicture: \"person/6.jpg\",\n    username: \"Relative 6\",\n  },\n\n  {\n    id: 7,\n    profilePicture: \"person/7.jpg\",\n    username: \"Relative 7\",\n  },\n  {\n    id: \"6203b42951c0ffbbe8e4aace\",\n    profilePicture: \"person/8.jpg\",\n    username: \"Relative 8\",\n  },\n];\nexport const userRequests = [\n  {\n    id: 1,\n    username: \"User 1\",\n  },\n  {\n    id: 2,\n    username: \"User 2\",\n  },\n  {\n    id: 3,\n    username: \"User 3\",\n  },\n  {\n    id: 4,\n    username: \"User 4\",\n  },\n  {\n    id: 5,\n    username: \"User 5\",\n  },\n  {\n    id: 6,\n    username: \"User 6\",\n  },\n\n  {\n    id: 7,\n    username: \"User 7\",\n  },\n  {\n    id: 8,\n    username: \"User 8\",\n  },\n];\n\nexport const Posts = [\n  {\n    id: 1,\n    desc: \"My grandfather with my child\",\n    img: \"post/1.jpg\",\n    date: \"20 minutes ago\",\n    userId: 1,\n    likes: 11,\n    comment: 3,\n  },\n  {\n    id: 2,\n    img: \"post/2.jpg\",\n    desc: \"I love my family\",\n    date: \"47 minutes ago\",\n    userId: 2,\n    likes: 5,\n    comment: 3,\n  },\n  {\n    id: 3,\n    desc: \"Pretty children\",\n    img: \"post/3.jpg\",\n    date: \"3 hours ago\",\n    userId: 3,\n    likes: 14,\n    comment: 3,\n  },\n  {\n    id: 4,\n    img: \"post/4.jpg\",\n    desc: \"Never forget this day\",\n    date: \"8 hours ago\",\n    userId: 4,\n    likes: 5,\n    comment: 3,\n  },\n];\n\nexport const LearningPosts = [\n  {\n    id: 1,\n    header: \"Pyramids\",\n    desc: \"The Egyptian pyramids are ancient masonry structures located in Egypt. Approximately 80 pyramids were built within the Kingdom of Kush, now located in the modern country of Sudan. Of those located in modern Egypt, most were built as tombs for the country's pharaohs and their consorts during the Old and Middle Kingdom periods, The earliest known Egyptian pyramids are found at Saqqara, northwest of Memphis, although at least one step-pyramid-like structure has been found at Saqqara, dating to the First Dynasty: Mastaba 3808, which has been attributed to the reign of Pharaoh Anedjib, with inscriptions, and other archaeological remains of the period, suggesting there may have been others, The otherwise earliest among these is the Pyramid of Djoser built c. 2630-2610 BCE during the Third Dynasty. This pyramid and its surrounding complex are generally considered to be the world's oldest monumental structures constructed of dressed masonry, The most famous Egyptian pyramids are those found at Giza, on the outskirts of Cairo. Several of the Giza pyramids are counted among the largest structures ever built, The Pyramid of Khufu is the largest Egyptian pyramid. It is the only one of the Seven Wonders of the Ancient World still in existence, this is despite being the oldest wonder by about 2,000 years\",\n    img: \"pyramids.jpg\",\n    category: \"history\",\n  },\n  {\n    id: 2,\n    header: \"Luxor Temple\",\n    desc: \"The temple has been in almost continuous use as a place of worship right up to the present day. During the Christian era, the temple's hypostyle hall was converted into a Christian church, and the remains of another Coptic church can be seen to the west. Then for thousands of years, the temple was buried beneath the streets and houses of Luxor. Eventually the mosque of Sufi Shaykh Yusuf Abu al-Hajjaj was built over it. This mosque was carefully preserved when the temple was uncovered and forms an integral part of the site today. Before the building works by Rameses II the northern end of the court was originally the entrance to the temple. It was an enclosed colonnade of seven pairs of 52-foot (16m) high open-flower papyrus columns. It was begun by Amenhotep III and completed by Tutankhamun and still support its huge\",\n    img: \"luxor.jpg\",\n    category: \"history\",\n  },\n  {\n    id: 3,\n    header: \"What is Physics ?\",\n    desc: \"Physics is a branch of science that studies matter and its motion as well as how it interacts with energy and forces. Physics is a huge subject. There are many branches of physics including electricity, astronomy, motion, waves, sound, and light. Physics studies the smallest elementary particles and atoms as well as the largest stars and the universe.Scientists who are experts in physics are called physicists. Physicists use the scientific method to test hypotheses and develop scientific laws. Some of the most famous scientists in history are considered physicists such as Isaac Newton and Albert Einstein.Physics Subjects, Physics explains how the world around us works. Many of our modern technologies are based off of scientific discoveries made in the science of physics. Engineers use physics to help design airplanes, cars, buildings, and electronics such as computers and cell phones.\",\n    img: \"physics.jpg\",\n    category: \"science\",\n  },\n];\n\n// What is physics?\n","import \"./readOnlyPost.css\";\n\nexport default function ReadOnlyPost({ post }) {\n  const postImg = post.img;\n\n  return (\n    <div className=\"readOnlyPost post\">\n      <div className=\"postWrapper\">\n        <div className=\"postCenter\">\n          {postImg && (\n            <img\n              className=\"postImg\"\n              src={`/images/posts/${postImg}`}\n              alt=\"postImg\"\n            />\n          )}\n          <span className=\"postText\">{post.desc}</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import \"./learningCategory.css\";\n\nimport { useParams } from \"react-router-dom\";\nimport { LearningPosts } from \"../../dummyData\";\n\n// Import components\nimport Topbar from \"../../components/topbar/Topbar\";\nimport Sidebar from \"../../components/sidebar/Sidebar\";\nimport ReadOnlyPost from \"../../components/readOnlyPost/ReadOnlyPost\";\n\nexport default function LearningCategory() {\n  let { category } = useParams();\n\n  return (\n    <>\n      <Topbar />\n      <div className=\"learnContainer\">\n        <Sidebar />\n        <div className=\"feed\">\n          <p className=\"learnHeader text-cap\">{category}</p>\n          <div className=\"\">\n            {LearningPosts.map(\n              (post) =>\n                post.category === category && (\n                  <ReadOnlyPost key={post.id} post={post} />\n                )\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","import { useContext } from \"react\";\nimport { Context } from \"./context/Context\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\n\n// Import pages\nimport Home from \"./pages/home/Home\";\nimport Chat from \"./pages/chat/Chat\";\nimport Room from \"./pages/Room/Room\";\nimport Chats from \"./pages/chats/Chats\";\nimport Login from \"./pages/login/Login\";\nimport Profile from \"./pages/profile/Profile\";\nimport Settings from \"./pages/settings/Settings\";\nimport Learning from \"./pages/learning/Learning\";\nimport Register from \"./pages/register/Register\";\nimport Requests from \"./pages/requests/Requests\";\nimport PostDetails from \"./pages/postDetails/PostDetails\";\nimport LearningCategory from \"./pages/learningCategory/LearningCategory\";\n\nfunction App() {\n  const { user } = useContext(Context);\n\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/register\" component={Register} />\n        {user ? (\n          <>\n            <Route exact path=\"/\" component={Home} />\n            <Route path=\"/chats\" component={Chats} />\n            <Route path=\"/requests\" component={Requests} />\n            <Route path=\"/settings\" component={Settings} />\n            <Route path=\"/chat/:friendId\" component={Chat} />\n            <Route path=\"/profile/:userId\" component={Profile} />\n            <Route path=\"/room/:type/:roomID\" component={Room} />\n            <Route path=\"/posts/:postId\" component={PostDetails} />\n            <Route exact path=\"/learning\" component={Learning} />\n            <Route path=\"/learning/:category\" component={LearningCategory} />\n          </>\n        ) : (\n          <>\n            <Redirect from=\"/\" to=\"/login\" />\n            <Redirect from=\"/profile/:userId\" to=\"/login\" />\n            <Redirect from=\"/posts/:postId\" to=\"/login\" />\n            <Redirect from=\"/requests\" to=\"/login\" />\n            <Redirect from=\"/chats\" to=\"/login\" />\n            <Redirect from=\"/chat/:userId\" to=\"/login\" />\n            <Redirect from=\"/room/:type/:roomID\" to=\"/login\" />\n            <Redirect from=\"/learning\" to=\"/login\" />\n            <Redirect from=\"/learning/:category\" to=\"/login\" />\n          </>\n        )}\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { ContextProvider } from \"./context/Context\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ContextProvider>\n      <App />\n    </ContextProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}