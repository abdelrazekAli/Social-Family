(this["webpackJsonpreact-social"]=this["webpackJsonpreact-social"]||[]).push([[0],{127:function(e,t,s){},135:function(e,t,s){},136:function(e,t,s){},137:function(e,t,s){},142:function(e,t,s){},143:function(e,t,s){},144:function(e,t,s){},145:function(e,t,s){},146:function(e,t,s){},147:function(e,t,s){},148:function(e,t,s){},152:function(e,t,s){},153:function(e,t,s){},154:function(e,t,s){},155:function(e,t,s){},177:function(e,t){},179:function(e,t){},188:function(e,t,s){},189:function(e,t,s){},190:function(e,t,s){},191:function(e,t,s){},192:function(e,t,s){},193:function(e,t,s){},194:function(e,t,s){},195:function(e,t,s){},196:function(e,t,s){},197:function(e,t,s){},198:function(e,t,s){},199:function(e,t,s){},200:function(e,t,s){},201:function(e,t,s){},202:function(e,t,s){},203:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),a=s(46),r=s.n(a),i=s(3),o=s.n(i),l=s(51),d=s(5),u=s(4),j=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"UPDATE_START":return Object(l.a)(Object(l.a)({},e),{},{isFetching:!0});case"UPDATE_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"UPDATE_FAILURE":return{user:e.user,isFetching:!1,error:!0};case"LOGOUT":return{user:null,isFetching:!1,error:!1};default:return e}},b=s(8),m=s.n(b),h=s(87),p=s(0),O={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},x=Object(n.createContext)(O),f=function(e){var t=e.children,s=Object(n.useReducer)(j,O),c=Object(u.a)(s,2),a=c[0],r=c[1];return Object(n.useEffect)((function(){localStorage.setItem("user",JSON.stringify(a.user))}),[a.user]),Object(p.jsx)(x.Provider,{value:{user:a.user,isFetching:a.isFetching,error:a.error,dispatch:r},children:t})},g=O.user,v=function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/api/v1/auth/refresh-token",{token:g.refreshToken});case 3:return t=e.sent,localStorage.setItem("user",JSON.stringify(Object(l.a)(Object(l.a)({},g),{},{accessToken:t.data.accessToken}))),e.abrupt("return",t.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),N=m.a.create();if(g){var y=Object(h.a)(g.accessToken);N.interceptors.request.use(function(){var e=Object(d.a)(o.a.mark((function e(t){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=new Date,!(1e3*y.exp<s.getTime())){e.next=6;break}return e.next=4,v();case 4:n=e.sent,t.headers["auth-token"]=n.accessToken;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)}))}var w=s(6),k=s(9);s(127);function _(){return Object(p.jsx)("div",{className:"topbarContainer",children:Object(p.jsx)("div",{children:Object(p.jsx)(w.b,{to:"/",children:Object(p.jsx)("span",{className:"logo",children:"Kids Social"})})})})}s(135);var I=s(97);s(136);function S(e){var t=e.user,s=t.img;return Object(p.jsx)(w.b,{to:"/profile/".concat(null===t||void 0===t?void 0:t._id),children:Object(p.jsxs)("li",{className:"rightbarFriend",children:[Object(p.jsx)("div",{className:"rightbarProfileImgContainer",children:Object(p.jsx)("img",{className:"rightbarProfileImg",src:s?"/images/users/".concat(s):"/assets/images/noAvatar.png",alt:"userImg"})}),Object(p.jsx)("span",{className:"rightbarUsername",children:null===t||void 0===t?void 0:t.username})]})})}var C=s(93),T=s.n(C),E=s(226),L=s(218),F=s(219),P=s(220),D=s(221),A=s(222),R=s(223),U=s(224),q=s(225);s(137);function W(e){var t=e.msg;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"alert-danger text-center",children:Object(p.jsx)("p",{children:t})})})}function B(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),s=Object(n.useState)(null),c=Object(u.a)(s,2),a=c[0],r=c[1],i=Object(n.useState)(""),l=Object(u.a)(i,2),j=l[0],b=l[1],h=Object(n.useState)(!1),O=Object(u.a)(h,2),f=O[0],g=O[1],v=Object(n.useState)(!1),N=Object(u.a)(v,2),y=N[0],k=N[1],_=Object(n.useState)(!1),C=Object(u.a)(_,2),B=C[0],z=C[1],M=Object(n.useContext)(x),H=M.user,G=M.dispatch,K=Object(n.useState)(!0),V=Object(u.a)(K,2),J=V[0],Y=V[1],X=Object(n.useState)(!1),Q=Object(u.a)(X,2),Z=Q[0],$=Q[1],ee=Object(n.useState)(!1),te=Object(u.a)(ee,2),se=te[0],ne=te[1],ce=function(){var e=Object(d.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t.length>0)){e.next=9;break}return z(t),e.next=5,m.a.get("/api/v1/users?search=".concat(t));case 5:s=e.sent,r(s.data),e.next=10;break;case 9:r([]);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/api/v1/auth/logout",{token:H.refreshToken});case 3:e.sent&&(G({type:"LOGOUT"}),window.location.replace("/")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.location.replace("/");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();window.onclick=function(t){t.target===e.current&&Y(!J)};return Object(p.jsxs)("div",{children:[Object(p.jsxs)("button",{className:"toggle-button",onClick:function(){g(!f)},children:[Object(p.jsx)("div",{className:"toggle-button-line"}),Object(p.jsx)("div",{className:"toggle-button-line"}),Object(p.jsx)("div",{className:"toggle-button-line"})]}),Object(p.jsx)("div",{className:f?"sidebar d-block":"sidebar",children:Object(p.jsxs)("div",{className:"sidebarWrapper",children:[Object(p.jsxs)("ul",{className:"sidebarList",children:[Object(p.jsx)(w.c,{to:"/",exact:!0,children:Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(L.a,{className:"sidebarIcon "}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Home"})]})}),Object(p.jsx)(w.c,{to:"/learning",exact:!0,children:Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(F.a,{className:"sidebarIcon "}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Learning"})]})}),Object(p.jsx)(w.c,{to:"/profile/".concat(H._id),children:Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(P.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Profile"})]})}),Object(p.jsx)(w.c,{to:"/requests",children:Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(D.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Requests"})]})}),Object(p.jsx)(w.c,{to:"/chats",children:Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(A.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Chats"})]})}),Object(p.jsx)(w.c,{to:"/settings",children:Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(R.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Settings"})]})}),Object(p.jsxs)("li",{className:"sidebarListItem",onClick:function(){Y(!J)},children:[Object(p.jsx)(T.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Invite Friend"})]}),Object(p.jsxs)("li",{className:"sidebarListItem",onClick:ae,children:[Object(p.jsx)(U.a,{className:"sidebarIcon"}),Object(p.jsx)("span",{className:"sidebarListItemText",children:"Logout"})]})]}),Object(p.jsx)("hr",{className:"sidebarHr"}),Object(p.jsxs)("div",{className:"topbarCenter",children:[Object(p.jsxs)("div",{className:"searchbar",children:[Object(p.jsx)(q.a,{}),Object(p.jsx)("input",{placeholder:"Search for new friends",onKeyUp:function(e){return ce(e.target.value)},maxLength:20,className:"searchInput"})]}),Object(p.jsx)("div",{className:"mt-1",children:Array.isArray(a)&&(a.length>0?a.map((function(e){return Object(p.jsx)(S,{user:e},e._id)})):Object(p.jsxs)("span",{className:"color-darker",children:['No users matches "',B,'"']}))})]})]})}),!J&&Object(p.jsx)("div",{children:Object(p.jsx)("div",{ref:e,id:"myModal",className:"modal",children:Object(p.jsxs)("div",{className:"modal-content p-relative",children:[Object(p.jsx)("span",{ref:t,onClick:function(){return Y(!0)},className:"modal-close",children:"\xd7"}),y&&Object(p.jsx)("div",{className:"loading",children:Object(p.jsx)(E.a,{color:"inherit",size:"20px"})}),Object(p.jsx)("h3",{children:"Invite Your Friends"}),Object(p.jsxs)("form",{className:"invite-form",onSubmit:function(e){e.preventDefault(),ne(!1),$(!1),j.length>0&&(k(!0),I.a.sendForm("service_lioq9kd","template_80lt9zl",e.target,"P5y7xvwHYXkrCpB3m").then((function(){k(!1),ne(!0)})).catch((function(){k(!1),$(!0),ne(!1)})))},children:[Object(p.jsx)("input",{className:"invite-input",placeholder:"Email Address",type:"email",name:"email",onChange:function(e){return b(e.target.value)}}),Object(p.jsx)("input",{className:"invite-input",placeholder:"Email Address",type:"hidden",name:"username",value:H.username}),Object(p.jsx)("button",{className:"invite-input button",type:"submit",disabled:y,children:"Invite"})]}),se&&Object(p.jsx)("span",{className:"text-success",children:"Invitation has been sent."}),Z&&Object(p.jsx)(W,{msg:"Faild to send invitation"})]})})})]})}s(142),s(143);function z(e){var t=e.post,s=t.img,c=t.userId.img,a=Object(n.useContext)(x).user,r=Object(n.useState)(!1),i=Object(u.a)(r,2),l=i[0],j=i[1],b=Object(n.useState)(t.likes.length),m=Object(u.a)(b,2),h=m[0],O=m[1],f=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(l?h-1:h+1),j(!l),e.next=4,N({method:"put",url:"/api/v1/posts/".concat(t._id,"/like"),headers:{"auth-token":a.accessToken}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"post",children:Object(p.jsxs)("div",{className:"postWrapper",children:[Object(p.jsx)("div",{className:"postTop",children:Object(p.jsxs)("div",{className:"postTopLeft",children:[Object(p.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(p.jsx)("img",{className:"postProfileImg",src:c?"/images/users/".concat(c):"/assets/images/noAvatar.png",alt:"userImg"})}),Object(p.jsxs)("div",{children:[Object(p.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(p.jsx)("span",{className:"postUsername",children:t.userId.username})}),Object(p.jsx)("span",{className:"postDate",children:new Date(t.createdAt).toLocaleString()})]})]})}),Object(p.jsx)(w.b,{to:{pathname:"/posts/".concat(t._id),state:{isLiked:l}},children:Object(p.jsxs)("div",{className:"postCenter",children:[Object(p.jsx)("span",{className:"postText",children:t.desc}),s&&Object(p.jsx)("img",{className:"postImg",src:"/images/posts/".concat(s),alt:"postImg"})]})}),Object(p.jsxs)("div",{className:"postBottom",children:[Object(p.jsxs)("div",{className:"postBottomLeft",onClick:f,children:[Object(p.jsx)("img",{className:"likeIcon",src:"/assets/images/like.png",alt:""}),Object(p.jsx)("span",{className:"postLikeCounter",children:h})]}),Object(p.jsx)(w.b,{to:{pathname:"/posts/".concat(t._id),state:{isLiked:l}},children:Object(p.jsx)("div",{className:"postBottomRight",children:Object(p.jsx)("span",{className:"postCommentText",children:"Comments"})})})]})]})})}s(144);var M=s(227),H=s(228);function G(){var e=Object(n.useRef)(),t=Object(n.useContext)(x).user,s=Object(n.useState)(null),c=Object(u.a)(s,2),a=c[0],r=c[1],i=Object(n.useState)(!1),l=Object(u.a)(i,2),j=l[0],b=l[1],m=function(){var s=Object(d.a)(o.a.mark((function s(n){var c,r,i;return o.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(n.preventDefault(),c={userId:t._id,desc:e.current.value},!a&&!c.desc){s.next=29;break}if(b(!0),!a){s.next=19;break}return r=new FormData,i="".concat(Date.now(),"_").concat(a.name),r.append("name",i),r.append("file",a),c.img=i,console.log(c),s.prev=11,s.next=14,N({method:"post",url:"/api/v1/upload/images/posts",headers:{"auth-token":t.accessToken},data:r});case 14:s.next=19;break;case 16:s.prev=16,s.t0=s.catch(11),console.log(s.t0);case 19:return s.prev=19,s.next=22,N.post("/api/v1/posts",c,{headers:{"auth-token":t.accessToken}});case 22:b(!1),window.location.reload(),s.next=29;break;case 26:s.prev=26,s.t1=s.catch(19),console.log(s.t1);case 29:case"end":return s.stop()}}),s,null,[[11,16],[19,26]])})));return function(e){return s.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"share",children:[Object(p.jsxs)("div",{className:"shareWrapper",children:[Object(p.jsxs)("div",{className:"shareTop",children:[Object(p.jsx)("img",{className:"shareProfileImg",src:t.img?"/images/users/".concat(t.img):"/assets/images/noAvatar.png",alt:"userImg"}),Object(p.jsx)("input",{placeholder:"Write a post",className:"shareInput",ref:e})]}),Object(p.jsx)("hr",{className:"shareHr"}),a&&Object(p.jsxs)("div",{className:"shareImgContainer",children:[Object(p.jsx)("img",{className:"shareImg",src:URL.createObjectURL(a),alt:""}),Object(p.jsx)(M.a,{className:"shareCancelImg",onClick:function(){return r(null)}})]}),Object(p.jsxs)("form",{className:"shareBottom",onSubmit:m,children:[Object(p.jsx)("div",{className:"shareOptions",children:Object(p.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(p.jsx)(H.a,{htmlColor:"#ec4747",className:"shareIcon"}),Object(p.jsx)("span",{className:"shareOptionText",children:"Photo | Video"}),Object(p.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return r(e.target.files[0])}})]})}),Object(p.jsx)("button",{className:"shareButton",type:"submit",disabled:j,children:"Post"})]})]}),j&&Object(p.jsx)("div",{className:"loading",children:Object(p.jsx)(E.a,{color:"inherit",size:"25px"})})]})}function K(e){var t=e.share,s=e.profile,c=Object(n.useState)([]),a=Object(u.a)(c,2),r=a[0],i=a[1],l=Object(n.useContext)(x).user;return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=6;break}return e.next=3,m.a.get("/api/v1/posts/user/".concat(s));case 3:t=e.sent,e.next=9;break;case 6:return e.next=8,m.a.get("/api/v1/posts/timeline/".concat(l._id));case 8:t=e.sent;case 9:i(t.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l._id,s]),Object(p.jsx)("div",{className:"feed",children:Object(p.jsxs)("div",{className:"feedWrapper",children:[t&&Object(p.jsx)(G,{}),r.length>0?r.map((function(e){return Object(p.jsx)(z,{post:e},e._id)})):Object(p.jsx)("div",{children:"No posts"})]})})}s(145),s(146);function V(e){var t=e.user,s=null===t||void 0===t?void 0:t.img;return Object(p.jsx)(w.b,{to:"/profile/".concat(null===t||void 0===t?void 0:t._id),children:Object(p.jsxs)("li",{className:"rightbarFriend",children:[Object(p.jsxs)("div",{className:"rightbarProfileImgContainer",children:[Object(p.jsx)("img",{className:"rightbarProfileImg",src:s?"/images/users/".concat(s):"/assets/images/noAvatar.png",alt:"userImg"}),Object(p.jsx)("div",{className:"rightbarOnline",title:"Online now"})]}),Object(p.jsx)("span",{className:"rightbarUsername",children:null===t||void 0===t?void 0:t.username})]})})}function J(e){var t=e.user,s=e.home,c=e.online,a=e.hideImg,r=e.userFriends,i=e.onlineFriends,l=Object(n.useState)([]),j=Object(u.a)(l,2),b=j[0],h=j[1],O=Object(n.useContext)(x).user;Object(n.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/v1/users/friends/".concat(O._id));case 2:t=e.sent,h(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[O._id]);var f=null===i||void 0===i?void 0:i.map((function(e){return b.find((function(t){return t._id===e.userId}))})),g=function(){return Object(p.jsxs)(p.Fragment,{children:[!a&&Object(p.jsx)("img",{className:"rightbarAd",src:"/assets/images/ad.jpg",alt:""}),Object(p.jsx)("h4",{className:"rightbarTitle",children:"Friends"}),Object(p.jsx)("div",{className:" rightbarFriendList",children:b.length>0?b.map((function(e){return Object(p.jsx)(S,{user:e},e._id)})):"No friends"})]})},v=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"btn-container"}),Object(p.jsx)("h4",{className:"rightbarTitle",children:"friends"}),(null===r||void 0===r?void 0:r.length)>0?Object(p.jsx)("div",{className:"rightbarFollowings",children:r.map((function(e){return Object(p.jsx)(S,{user:e},e._id)}))}):Object(p.jsx)("div",{className:"feedWrapper",children:"No friends"})]})},N=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"btn-container"}),(null===f||void 0===f?void 0:f.length)>0?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h4",{className:"rightbarTitle",children:"Online friends"}),Object(p.jsx)("div",{className:"rightbarFollowings",children:null===f||void 0===f?void 0:f.map((function(e){return Object(p.jsx)(V,{user:e},null===e||void 0===e?void 0:e._id)}))})]}):Object(p.jsx)("p",{className:"no-online",children:"No online friends"})]})};return Object(p.jsx)("div",{className:"rightbar",children:Object(p.jsxs)("div",{className:"rightbarWrapper",children:[t&&Object(p.jsx)(v,{}),s&&Object(p.jsx)(g,{}),c&&Object(p.jsx)(N,{})]})})}s(147);function Y(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"homeContainer",children:[Object(p.jsx)(B,{}),Object(p.jsx)(K,{share:!0}),Object(p.jsx)(J,{home:!0})]})]})}var X=s(41),Q=(s(148),s(239)),Z=s(62),$=s(231),ee=s(233),te=s(234),se=s(235),ne=s(232),ce=(s(152),s(63));function ae(e){var t=e.src,s=e.own,n=e.time;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:(s?"justify-content-end main-audio-bg":"justify-content-start")+" position-relative d-flex  mb-4",children:[Object(p.jsx)("audio",{src:t,controls:!0}),Object(p.jsx)("span",{className:s?"msg_time_send":"msg_time",children:Object(ce.a)(n)})]})})}s(153);var re=s(229),ie=s(230);function oe(e){var t=e.conversationId,s=e.setMessages,c=e.messages,a=e.emitMessage,r=Object(n.useRef)(null),i=Object(n.useContext)(x).user,l=Object(n.useState)(!1),j=Object(u.a)(l,2),b=j[0],m=j[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"record-wrapper",children:b?Object(p.jsx)("div",{ref:r,className:"voice-record",children:Object(p.jsx)(re.a,{className:"fs-inherit"})}):Object(p.jsx)("div",{className:"voice-record",onClick:function(){navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){var n;m(!0);var l=[],u=new MediaRecorder(e,{mimeType:"audio/webm"});u.addEventListener("dataavailable",(function(e){e.data.size>0&&l.push(e.data)})),u.addEventListener("stop",Object(d.a)(o.a.mark((function e(){var n,r,d,u,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=new Blob(l,{type:"audio/mp3;"}))){e.next=20;break}return r=new FormData,d="".concat(Date.now(),"_").concat(i._id,".mp3"),r.append("name",d),r.append("file",n),u={sender:i._id,content:d,conversationId:t},e.prev=7,e.next=10,N({method:"post",url:"/api/v1/upload/voices",headers:{"auth-token":i.accessToken},data:r});case 10:return e.next=12,N({method:"post",url:"/api/v1/messages",headers:{"auth-token":i.accessToken},data:u});case 12:j=e.sent,a(d),s([].concat(Object(X.a)(c),[j.data])),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[7,17]])})))),null===r||void 0===r||null===(n=r.current)||void 0===n||n.addEventListener("click",(function e(){m(!1),u.stop(),this.removeEventListener("click",e)})),u.start()}))},children:Object(p.jsx)(ie.a,{className:"fs-inherit"})})})})}s(154);function le(e){var t=e.own,s=e.msg;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:(t?"justify-content-end":"justify-content-start")+" position-relative d-flex  mb-4",children:[Object(p.jsx)("div",{className:t?"msg_cotainer_send":"msg_cotainer",children:s.content}),Object(p.jsx)("span",{className:t?"msg_time_send":"msg_time",children:Object(ce.a)(s.createdAt)})]})})}function de(){var e=Object(n.useRef)(),t=Object(k.h)().friendId,s=Object(n.useContext)(x).user,c=Object(n.useState)(),a=Object(u.a)(c,2),r=a[0],i=a[1],l=Object(n.useState)(!1),j=Object(u.a)(l,2),b=j[0],h=j[1],O=Object(n.useState)([]),f=Object(u.a)(O,2),g=f[0],v=f[1],y=Object(n.useRef)(),I=Object(n.useState)([]),S=Object(u.a)(I,2),C=S[0],T=S[1],L=Object(n.useState)(),F=Object(u.a)(L,2),P=F[0],D=F[1],A=Object(n.useState)(0),R=Object(u.a)(A,2),U=R[0],q=R[1],W=Object(n.useState)(null),z=Object(u.a)(W,2),M=z[0],H=z[1],G=Object(n.useState)(Object(Q.a)()),K=Object(u.a)(G,2),V=K[0],Y=K[1],ce=Object(n.useState)(""),re=Object(u.a)(ce,2),ie=re[0],de=re[1],ue=Object(n.useState)(!1),je=Object(u.a)(ue,2),be=je[0],me=je[1];Object(n.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/v1/users/".concat(t));case 3:s=e.sent,i(s.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(n.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/v1/conversations/find/".concat(t,"/").concat(s._id));case 3:n=e.sent,q(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[s,t]),Object(n.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N({method:"get",url:"/api/v1/messages/".concat(null===U||void 0===U?void 0:U._id),headers:{"auth-token":s.accessToken}});case 3:t=e.sent,T(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[U,s]),Object(n.useEffect)((function(){e.current=Object(Z.b)("/"),e.current.on("getMessage",(function(e){H({sender:e.senderId,content:e.content,createdAt:Date.now()})}))}),[]),Object(n.useEffect)((function(){M&&T((function(e){return[].concat(Object(X.a)(e),[M])}))}),[M]),Object(n.useEffect)((function(){e.current.on("offering call",(function(e){me(!0),de(e.callType),Y(e.callId)}))}),[]),Object(n.useEffect)((function(){e.current.emit("addUser",s._id),e.current.on("getUsers",(function(e){v(e.filter((function(e){return e.userId!==s._id})))}))}),[s]);var he=function(n){e.current.emit("sendMessage",{senderId:s._id,receiverId:t,content:n})},pe=function(){var e=Object(d.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!P){e.next=17;break}return h(!0),n={sender:s._id,content:P,conversationId:U._id},he(P),e.prev=5,e.next=8,N({method:"post",url:"/api/v1/messages",headers:{"auth-token":s.accessToken},data:n});case 8:c=e.sent,T([].concat(Object(X.a)(C),[c.data])),h(!1),D(""),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(s){e.current.emit("offering call",{friendId:t,callType:s,callId:V})};Object(n.useEffect)((function(){y.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),[C]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"chatContainer",children:[Object(p.jsx)(B,{}),Object(p.jsx)("div",{className:"container-fluid my-1",children:Object(p.jsxs)("div",{className:"row justify-content-center h-100",children:[b&&Object(p.jsx)("div",{className:"loading",children:Object(p.jsx)(E.a,{color:"inherit",size:"20px"})}),Object(p.jsxs)("div",{className:"col-md-8 col-xl-6 chat",children:[be&&Object(p.jsx)("div",{className:"caller",children:Object(p.jsxs)("div",{className:"content",children:[Object(p.jsxs)("h4",{className:"text-center h4-fs",children:[r.username," is calling..."]}),Object(p.jsxs)("div",{className:"call-btns",children:[Object(p.jsx)($.a,{variant:"contained",color:"secondary",className:"end-btn",onClick:function(){me(!1),e.current.emit("canceling call",s.username)},children:"Cancel"}),Object(p.jsx)($.a,{variant:"contained",className:"bg-green m-1",onClick:function(){var e;console.log(ie),e="video"===ie?"/room/video/".concat(V):"/room/voice/".concat(V);var t=window.open(e,"_blank","noopener,noreferrer");t&&(t.opener=null),me(!1),de(""),Y(Object(Q.a)())},children:"Answer"})]})]})}),Object(p.jsxs)("div",{className:"card card-chat",children:[r&&Object(p.jsx)("div",{className:"card-header msg_head",children:Object(p.jsxs)("div",{className:"d-flex bd-highlight",children:[Object(p.jsx)("div",{className:"img_cont",children:Object(p.jsxs)(w.b,{to:"/profile/".concat(t),children:[Object(p.jsx)("img",{src:r.img?"/images/users/".concat(r.img):"/assets/images/noAvatar.png",className:"rounded-circle user_img",alt:""}),g.find((function(e){return e.userId===t}))&&Object(p.jsx)("div",{className:"rightbarOnlineLg",title:"Online now"})]})}),Object(p.jsxs)("div",{className:"user_info",children:[Object(p.jsx)("span",{children:Object(p.jsx)(w.b,{to:"/profile/".concat(t),className:"pro-link",children:r.username})}),Object(p.jsx)("p",{children:"Private chat"})]}),Object(p.jsxs)("div",{className:"call-btns ml-1",children:[Object(p.jsx)(w.b,{to:"/room/voice/".concat(V),target:"_blank",children:Object(p.jsx)(ne.a,{className:"color-blue f-start",title:"Start a Voice call","aria-label":"call",onClick:function(){Oe("voice")},children:Object(p.jsx)(ee.a,{className:"color-blue fs-2"})})}),Object(p.jsx)(w.b,{to:"/room/video/".concat(V),target:"_blank",children:Object(p.jsx)(ne.a,{className:"color-blue f-start",title:"Start a Video call","aria-label":"call",onClick:function(){Oe("video")},children:Object(p.jsx)(te.a,{className:"color-blue fs-2"})})})]})]})}),Object(p.jsxs)("div",{id:"message-container",className:"card-body msg_card_body",children:[C.map((function(e){return function(e){var t,n=e.sender===s._id;return(null===e||void 0===e||null===(t=e.content)||void 0===t?void 0:t.endsWith(".mp3"))?Object(p.jsx)(ae,{src:"/voices/".concat(e.content),own:n,time:e.createdAt},e._id):Object(p.jsx)(le,{msg:e,own:n},e._id)}(e)})),Object(p.jsx)("div",{ref:y})]}),Object(p.jsx)("div",{className:"card-footer",children:Object(p.jsxs)("div",{className:"input-group",children:[Object(p.jsx)("textarea",{id:"message",name:"msg-input",className:"form-control type_msg textarea-bd",placeholder:"Write your message...",maxLength:"10000",value:P,onChange:function(e){return D(e.target.value)},autoFocus:!0}),Object(p.jsx)("button",{id:"sendBtn",className:"input-group-append  justify-content-end d-flex send-btn",disabled:b,onClick:function(e){return pe(e)},children:Object(p.jsx)("span",{className:"input-group-text send_btn bg-white color-main",children:Object(p.jsx)(se.a,{})})}),Object(p.jsx)(oe,{conversationId:U._id,setMessages:T,messages:C,emitMessage:he})]})})]})]})]})}),Object(p.jsx)(J,{hideImg:!0,online:!0,onlineFriends:g})]})]})}s(155);var ue=s(68),je=s.n(ue),be=(s(188),function(e){var t=e.peer,s=e.style,c=Object(n.useRef)();return Object(n.useEffect)((function(){t.on("stream",(function(e){c.current.srcObject=e}))}),[t]),Object(p.jsx)("video",{playsInline:!0,autoPlay:!0,ref:c,className:"h-40 w-50",style:s})}),me={height:window.innerHeight/2,width:window.innerWidth/2};function he(){var e=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useRef)([]),c=Object(k.h)(),a=c.type,r=c.roomID,i=Object(n.useState)([]),o=Object(u.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)(!1),b=Object(u.a)(j,2),m=b[0],h=b[1],O=Object(n.useState)(!0),x=Object(u.a)(O,2),f=x[0],g=x[1],v=Object(n.useState)(""),N=Object(u.a)(v,2),y=N[0],w=N[1],I=Object(n.useState)(!1),S=Object(u.a)(I,2),C=S[0],T=S[1];Object(n.useEffect)((function(){e.current=Z.a.connect("/"),navigator.mediaDevices.getUserMedia("video"===a?{video:me,audio:!0}:{audio:!0}).then((function(n){t.current.srcObject=n,e.current.emit("join room",r),e.current.on("all users",(function(t){var c=[];t.forEach((function(t){var a=E(t,e.current.id,n);s.current.push({peerID:t,peer:a}),c.push(a)})),d(c)})),e.current.on("user joined",(function(e){g(!1),h(!0);var t=L(e.signal,e.callerID,n);s.current.push({peerID:e.callerID,peer:t}),d((function(e){return[].concat(Object(X.a)(e),[t])}))})),e.current.on("receiving returned signal",(function(e){g(!1),s.current.find((function(t){return t.peerID===e.id})).peer.signal(e.signal)}))}))}),[r,a]),Object(n.useEffect)((function(){})),Object(n.useEffect)((function(){e.current.on("canceling call",(function(e){w(e),T(!0)}))}),[]);var E=function(t,s,n){var c=new je.a({initiator:!0,trickle:!1,stream:n});return c.on("signal",(function(n){e.current.emit("sending signal",{userToSignal:t,callerID:s,signal:n})})),c},L=function(t,s,n){var c=new je.a({initiator:!1,trickle:!1,stream:n});return c.on("signal",(function(t){g(!1),e.current.emit("returning signal",{signal:t,callerID:s})})),c.signal(t),c};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"room-container",children:["video"===a?Object(p.jsx)("h4",{children:"Video Call"}):Object(p.jsx)("h4",{children:"Voice Call"}),C&&Object(p.jsxs)("p",{className:"alert-danger fs-25",children:[y," canceled the call"]}),m&&Object(p.jsx)("p",{className:"fs-25 color-main",children:"Your friend joined"}),f&&!C&&Object(p.jsx)("p",{className:"fs-25 color-main",children:"Just wait until your friend join ..."}),l.map((function(e,t){return Object(p.jsx)(be,{peer:e,style:"voice"===a?{display:"none"}:null},t)})),"voice"===a&&Object(p.jsx)("img",{src:"/assets/images/signal.gif",alt:""}),Object(p.jsx)("div",{className:"videos",children:Object(p.jsx)("video",{muted:!0,ref:t,autoPlay:!0,playsInline:!0,style:"voice"===a?{display:"none"}:null,className:"user-video"})}),Object(p.jsx)($.a,{variant:"contained",color:"secondary",className:"end-btn mb-1",onClick:function(){return window.close()},children:"End Call"})]})]})}s(189),s(190);var pe=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_FOLDER,Oe=function(e){var t=e.user;return Object(p.jsxs)("div",{className:"user-chat-card mb-2",children:[Object(p.jsx)("img",{src:t.profilePicture?pe+t.img:"/assets/images/noAvatar.png",alt:"user"}),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h5",{children:t.username}),Object(p.jsx)(w.b,{to:"/chat/".concat(t._id),className:"btn btn-chat",children:"Chat"})]})]})};function xe(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),s=t[0],c=t[1],a=Object(n.useContext)(x).user;return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/v1/users/friends/".concat(a._id));case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a._id]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"chatsContainer",children:[Object(p.jsx)(B,{}),Object(p.jsxs)("div",{className:"chats",children:[Object(p.jsxs)("div",{className:"chatsHeader",children:[Object(p.jsx)("p",{className:"mb-1",children:"Get in Touch "}),Object(p.jsx)("p",{children:" Start Chat Your Friends"})]}),Object(p.jsx)("div",{className:"users",children:s.length>0&&s.map((function(e){return Object(p.jsx)(Oe,{user:e},e._id)}))})]})]})]})}s(191);function fe(){var e=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useState)(""),c=Object(u.a)(s,2),a=c[0],r=c[1],i=Object(n.useContext)(x),l=i.isFetching,j=i.dispatch,b=i.error,h=function(){var s=Object(d.a)(o.a.mark((function s(n){var c;return o.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n.preventDefault(),j({type:"LOGIN_START"}),s.prev=2,s.next=5,m.a.post("/api/v1/auth/login",{email:e.current.value,password:t.current.value});case 5:c=s.sent,j({type:"LOGIN_SUCCESS",payload:c.data}),window.location.replace("/"),s.next=14;break;case 10:s.prev=10,s.t0=s.catch(2),j({type:"LOGIN_FAILURE"}),500===s.t0.response.status?r("Somthing went wrong!"):r("Invalid email or password");case 14:case"end":return s.stop()}}),s,null,[[2,10]])})));return function(e){return s.apply(this,arguments)}}();return document.body.style.backgroundColor="#0080ff",Object(p.jsx)("div",{className:"login-page",children:Object(p.jsxs)("div",{className:"login-container",children:[Object(p.jsx)("div",{className:"login-icon",children:"Kids Social"}),Object(p.jsxs)("div",{className:"login-form",children:[Object(p.jsx)("div",{className:"login-title",children:"Log In"}),Object(p.jsxs)("form",{onSubmit:h,children:[Object(p.jsx)("input",{className:"login-input",placeholder:"Email",type:"email",required:!0,ref:e}),Object(p.jsx)("input",{className:"login-input",placeholder:"Password",type:"password",minLength:"6",required:!0,ref:t}),Object(p.jsx)("button",{className:"login-input button",type:"submit",disabled:l,children:l?Object(p.jsx)(E.a,{color:"#fff",size:"20px"}):"Log In"}),b&&Object(p.jsx)(W,{msg:a})]})]}),Object(p.jsxs)("div",{className:"login-signup",children:["Don't have an account?",Object(p.jsx)(w.b,{to:"/register",children:"Sign Up"})]})]})})}s(192);function ge(){var e=Object(k.h)().userId,t=Object(n.useContext)(x).user,s=Object(n.useState)(),c=Object(u.a)(s,2),a=c[0],r=c[1],i=Object(n.useState)(),l=Object(u.a)(i,2),j=l[0],b=l[1],h=Object(n.useState)(!1),O=Object(u.a)(h,2),f=O[0],g=O[1],v=null===j||void 0===j?void 0:j.img;Object(n.useEffect)((function(){(function(){var s=Object(d.a)(o.a.mark((function s(){var n,c;return o.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,m.a.get("/api/v1/users/".concat(e));case 3:return n=s.sent,b(n.data),s.next=7,m.a.get("/api/v1/users/".concat(t._id));case 7:c=s.sent,r(c.data),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(0),console.log(s.t0);case 14:case"end":return s.stop()}}),s,null,[[0,11]])})));return function(){return s.apply(this,arguments)}})()()}),[e,t._id]);var y=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,N({method:"put",url:"/api/v1/users/".concat(j._id,"/accept"),headers:{"auth-token":t.accessToken}});case 3:g(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,N({method:"put",url:"/api/v1/users/".concat(j._id,"/add"),headers:{"auth-token":t.accessToken}});case 3:g(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,N({method:"delete",url:"/api/v1/users/".concat(j._id,"/cancel"),headers:{"auth-token":t.accessToken}});case 3:g(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,N({method:"delete",url:"/api/v1/users/".concat(j._id,"/reject"),headers:{"auth-token":t.accessToken}});case 3:g(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,N({method:"put",url:"/api/v1/users/".concat(j._id,"/delete"),headers:{"auth-token":t.accessToken}});case 3:g(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"profile",children:[Object(p.jsx)(B,{}),j&&a&&Object(p.jsxs)("div",{className:"profileRight",children:[Object(p.jsxs)("div",{className:"profileRightTop",children:[Object(p.jsx)("div",{className:"profileCover",children:Object(p.jsx)("img",{className:"profileUserImg",src:v?"/images/users/".concat(v):"/assets/images/noAvatar.png",alt:"userImg"})}),Object(p.jsx)("div",{className:"profileInfo",children:Object(p.jsx)("h4",{className:"profileInfoName",children:j.username})})]}),t._id!==j._id&&Object(p.jsx)("div",{className:"btn-container",children:a.friends.find((function(e){return e._id===j._id}))?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{onClick:T,disabled:f,className:"btn btn-red",children:"Unfriend"}),Object(p.jsx)("button",{disabled:f,className:"btn btn-confirm",children:Object(p.jsx)(w.b,{to:"/chat/".concat(e),className:"color-light",children:"Chat"})})]}):a.sentRequests.find((function(e){return e._id===j._id}))?Object(p.jsx)("button",{onClick:S,disabled:f,className:"btn btn-red",children:"Cancel"}):a.friendRequests.find((function(e){return e._id===j._id}))?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{onClick:y,disabled:f,className:"btn btn-confirm",children:"Confirm"}),Object(p.jsx)("button",{onClick:C,disabled:f,className:"btn btn-delete",children:"Delete"})]}):Object(p.jsx)("button",{onClick:I,disabled:f,className:" btn btn-confirm",children:"Add"})}),f&&Object(p.jsx)("div",{className:"loading",children:Object(p.jsx)(E.a,{color:"inherit",size:"20px"})}),Object(p.jsxs)("div",{className:"profileRightBottom",children:[Object(p.jsx)(J,{user:!0,userFriends:j.friends}),Object(p.jsx)("h4",{className:"rightbarTitle",children:"Posts"}),Object(p.jsx)(K,{share:!1,profile:e})]})]})]})]})}s(193);var ve=s(236);function Ne(){var e=Object(n.useContext)(x),t=e.user,s=e.dispatch,c=Object(n.useState)(null===t||void 0===t?void 0:t.email),a=Object(u.a)(c,2),r=a[0],i=a[1],l=Object(n.useState)(null===t||void 0===t?void 0:t.username),j=Object(u.a)(l,2),b=j[0],m=j[1],h=Object(n.useState)(null),O=Object(u.a)(h,2),f=O[0],g=O[1],v=Object(n.useState)(!1),y=Object(u.a)(v,2),w=y[0],k=y[1],I=Object(n.useState)(!1),S=Object(u.a)(I,2),C=S[0],T=S[1],L=Object(n.useState)({isError:!1,msg:""}),F=Object(u.a)(L,2),P=F[0],D=F[1],A=function(){var e=Object(d.a)(o.a.mark((function e(n){var c,a,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),T(!0),k(!1),D({isError:!1,msg:""}),s({type:"UPDATE_START"}),c={username:b,email:r},!f){e.next=22;break}return a=new FormData,i=Date.now()+f.name,a.append("name",i),a.append("file",f),c.img=i,e.prev=12,e.next=15,N({method:"post",url:"/api/v1/upload/images/users",headers:{"auth-token":t.accessToken},data:a});case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(12),s({type:"UPDATE_FAILURE"}),T(!1),k(!1);case 22:return e.prev=22,e.next=25,N({method:"put",url:"/api/v1/users/".concat(t._id),headers:{"auth-token":t.accessToken},data:c});case 25:l=e.sent,T(!1),k(!0),s({type:"UPDATE_SUCCESS",payload:l.data}),e.next=37;break;case 31:e.prev=31,e.t1=e.catch(22),T(!1),k(!1),s({type:"UPDATE_FAILURE"}),409===e.t1.response.status?D({isError:!0,msg:"Email is already used"}):D({isError:!0,msg:"Somthing went wrong!"});case 37:case"end":return e.stop()}}),e,null,[[12,17],[22,31]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"settingsContainer",children:[Object(p.jsx)(B,{}),Object(p.jsxs)("div",{className:"settingsWrapper",children:[C&&Object(p.jsx)("div",{className:"loading",children:Object(p.jsx)(E.a,{color:"inherit",size:"20px"})}),Object(p.jsxs)("form",{className:"settingsForm",onSubmit:A,children:[Object(p.jsxs)("div",{className:"settingsPP",children:[Object(p.jsx)("img",{className:"",src:f?URL.createObjectURL(f):t.img?"/images/users/"+t.img:"/assets/images/noAvatar.png",alt:""}),Object(p.jsx)("label",{htmlFor:"fileInput",children:Object(p.jsx)("span",{className:"settingsPPIcon ",children:Object(p.jsx)(ve.a,{className:"color-green edit-icon"})})}),Object(p.jsx)("input",{type:"file",id:"fileInput",accept:".png,.jpeg,.jpg",style:{display:"none"},onChange:function(e){return g(e.target.files[0])}})]}),Object(p.jsx)("label",{children:"Name"}),Object(p.jsx)("input",{type:"text",minLength:3,maxLength:20,placeholder:t.username,onChange:function(e){return m(e.target.value)}}),Object(p.jsx)("label",{children:"Email"}),Object(p.jsx)("input",{type:"email",placeholder:t.email,onChange:function(e){return i(e.target.value)}}),Object(p.jsx)("div",{className:"btn-container",children:Object(p.jsx)("button",{disabled:C,type:"submit",className:"btn btn-confirm settingsSubmit",children:"Update"})}),w&&Object(p.jsx)("span",{className:"text-success",children:"Profile has been updated."}),P.isError&&Object(p.jsx)(W,{msg:P.msg})]})]})]})]})}s(194);function ye(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"learnContainer",children:[Object(p.jsx)(B,{}),Object(p.jsxs)("div",{className:"learning-cards",children:[Object(p.jsx)("p",{className:"learnHeader",children:"Reading Is Dreaming With Open Eyes"}),Object(p.jsxs)("div",{className:"card-grid",children:[Object(p.jsxs)(w.b,{className:"card",to:"/learning/history",children:[Object(p.jsx)("div",{className:"card__background",style:{backgroundImage:"url('/assets/images/categories/history.jpg')"}}),Object(p.jsxs)("div",{className:"card__content",children:[Object(p.jsx)("p",{className:"card__category",children:"Category"}),Object(p.jsx)("h3",{className:"card__heading",children:"History"})]})]}),Object(p.jsxs)(w.b,{className:"card",to:"/learning/science",children:[Object(p.jsx)("div",{className:"card__background",style:{backgroundImage:"url('/assets/images/categories/science.jpg')"}}),Object(p.jsxs)("div",{className:"card__content",children:[Object(p.jsx)("p",{className:"card__category",children:"Category"}),Object(p.jsx)("h3",{className:"card__heading",children:"Science"})]})]}),Object(p.jsxs)(w.b,{className:"card",to:"/learning/space",children:[Object(p.jsx)("div",{className:"card__background",style:{backgroundImage:"url('/assets/images/categories/space.jpg')"}}),Object(p.jsxs)("div",{className:"card__content",children:[Object(p.jsx)("p",{className:"card__category",children:"Category"}),Object(p.jsx)("h3",{className:"card__heading",children:"Space"})]})]}),Object(p.jsxs)(w.b,{className:"card",to:"/learning/images/programming",children:[Object(p.jsx)("div",{className:"card__background",style:{backgroundImage:"url('/assets/images/categories/programming.jpg')"}}),Object(p.jsxs)("div",{className:"card__content",children:[Object(p.jsx)("p",{className:"card__category",children:"Category"}),Object(p.jsx)("h3",{className:"card__heading",children:"Programming"})]})]}),Object(p.jsx)("div",{})]})]})]})]})}s(195);function we(){var e=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useRef)(),c=Object(n.useRef)(),a=Object(n.useState)(!1),r=Object(u.a)(a,2),i=r[0],l=r[1],j=Object(n.useState)({isError:!1,msg:""}),b=Object(u.a)(j,2),h=b[0],O=b[1],x=function(){var n=Object(d.a)(o.a.mark((function n(a){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),console.log("hi",s.current.value,c.current.value),s.current.value===c.current.value){n.next=4;break}return n.abrupt("return",O({isError:!0,msg:"Passwords are not the same"}));case 4:return l(!0),O({isError:!1,msg:""}),n.prev=6,n.next=9,m.a.post("/api/v1/auth/register",{username:e.current.value,email:t.current.value,password:s.current.value});case 9:n.sent.data&&(window.location.replace("/login"),l(!1)),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(6),l(!1),409===n.t0.response.status?O({isError:!0,msg:"Email is already used"}):O({isError:!0,msg:"Somthing went wrong!"});case 17:case"end":return n.stop()}}),n,null,[[6,13]])})));return function(e){return n.apply(this,arguments)}}();return document.body.style.backgroundColor="#0080ff",Object(p.jsxs)("div",{className:"login-container",children:[Object(p.jsx)("div",{className:"login-icon",children:"Kids Social"}),Object(p.jsxs)("div",{className:"login-form",children:[Object(p.jsx)("div",{className:"login-title",children:"Sign Up"}),Object(p.jsxs)("form",{onSubmit:x,children:[Object(p.jsx)("input",{className:"login-input",placeholder:"Name",type:"text",required:!0,ref:e}),Object(p.jsx)("input",{className:"login-input",placeholder:"Email",type:"email",required:!0,ref:t}),Object(p.jsx)("input",{className:"login-input",placeholder:"Password",type:"password",required:!0,ref:s}),Object(p.jsx)("input",{className:"login-input",placeholder:"Confirm Password",type:"password",required:!0,ref:c}),Object(p.jsx)("button",{className:"login-input button",type:"submit",disabled:i,children:i?Object(p.jsx)(E.a,{color:"#fff",size:"20px"}):"Sign Up"}),h.isError&&Object(p.jsx)(W,{msg:h.msg})]})]}),Object(p.jsxs)("div",{className:"login-signup",children:["Have an account? ",Object(p.jsx)(w.b,{to:"/login",children:"Log in"})]})]})}s(196),s(197);var ke=function(e){var t=e.request,s=Object(n.useContext)(x).user,c=t.img,a=Object(n.useState)(!1),r=Object(u.a)(a,2),i=r[0],l=r[1],j=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,N({method:"put",url:"/api/v1/users/".concat(t._id,"/accept"),headers:{"auth-token":s.accessToken}});case 3:l(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,N({method:"delete",url:"/api/v1/users/".concat(t._id,"/reject"),headers:{"auth-token":s.accessToken}});case 3:l(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"request",children:[Object(p.jsx)(w.b,{to:"/profile/".concat(t._id),children:Object(p.jsx)("img",{className:"req-img",src:c?"/images/users/".concat(c):"/assets/images/noAvatar.png",alt:"userImg"})}),Object(p.jsxs)("div",{className:"req-details",children:[Object(p.jsx)(w.b,{to:"/profile/".concat(t._id),children:Object(p.jsx)("h3",{children:t.username})}),Object(p.jsxs)("div",{className:"req-buttons",children:[Object(p.jsx)("button",{onClick:j,disabled:i,className:"btn btn-confirm",children:"Confirm"}),Object(p.jsx)("button",{onClick:b,disabled:i,className:"btn btn-delete",children:"Delete"})]})]}),i&&Object(p.jsx)("div",{className:"loading",children:Object(p.jsx)(E.a,{color:"inherit",size:"20px"})})]})};function _e(){var e=Object(n.useContext)(x).user,t=Object(n.useState)([]),s=Object(u.a)(t,2),c=s[0],a=s[1];return Object(n.useEffect)((function(){(function(){var t=Object(d.a)(o.a.mark((function t(){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/api/v1/users/friendRequests/".concat(e._id));case 2:s=t.sent,a(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e._id]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"RequestsContainer",children:[Object(p.jsx)(B,{}),Object(p.jsx)("div",{className:"requests",children:c.length>0?c.map((function(e){return Object(p.jsx)(ke,{request:e},e._id)})):Object(p.jsx)("h4",{className:"h4-fs m-1",children:"No friend requests"})}),Object(p.jsx)(J,{home:!0})]})]})}s(198),s(199),s(200);var Ie=s(237);function Se(e){var t=e.comment,s=t.userId.img,c=Object(n.useContext)(x).user,a=Object(n.useState)(!1),r=Object(u.a)(a,2),i=r[0],l=r[1],j=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,N({method:"delete",url:"/api/v1/comments/".concat(t._id),headers:{"auth-token":c.accessToken}});case 3:l(!1),window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"comment",children:[Object(p.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(p.jsx)("img",{className:"comment-img",src:s?"/images/users/".concat(s):"/assets/images/noAvatar.png",alt:"userImg"})}),Object(p.jsxs)("div",{className:"comment-details comment-bg",children:[Object(p.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(p.jsx)("h4",{children:t.userId.username})}),Object(p.jsx)("div",{className:"comment-body",children:Object(p.jsx)("p",{children:t.desc})})]}),t.userId._id===c._id&&Object(p.jsx)(Ie.a,{htmlColor:"red",className:"postDeleteIcon",onClick:j}),i&&Object(p.jsx)("div",{className:"loading",children:Object(p.jsx)(E.a,{color:"inherit",size:"18px"})})]})}var Ce=s(238);function Te(e){var t=e.post,s=e.liked,c=t.img,a=Object(k.g)(),r=t.userId.img,i=Object(n.useContext)(x).user,l=Object(n.useState)(t.likes.length),j=Object(u.a)(l,2),b=j[0],h=j[1],O=Object(n.useState)(s),f=Object(u.a)(O,2),g=f[0],v=f[1],y=Object(n.useState)(!1),_=Object(u.a)(y,2),I=_[0],S=_[1],C=Object(n.useState)(),T=Object(u.a)(C,2),L=T[0],F=T[1],P=Object(n.useState)([]),D=Object(u.a)(P,2),A=D[0],R=D[1];Object(n.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/v1/comments/".concat(t._id));case 3:s=e.sent,R(s.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t._id,I]);var U=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N({method:"put",url:"/api/v1/posts/".concat(t._id,"/like"),headers:{"auth-token":i.accessToken}});case 2:h(g?b-1:b+1),v(!g);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(o.a.mark((function e(){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(L.length>0)){e.next=7;break}return S(!0),s={postId:t._id,desc:L},e.next=5,N({method:"post",url:"/api/v1/comments",data:s,headers:{"auth-token":i.accessToken}});case 5:S(!1),F("");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,N({method:"delete",url:"/api/v1/posts/".concat(t._id),headers:{"auth-token":i.accessToken}});case 3:S(!1),a.goBack();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"post",children:Object(p.jsxs)("div",{className:"postWrapper",children:[Object(p.jsxs)("div",{className:"postTop",children:[Object(p.jsxs)("div",{className:"postTopLeft",children:[Object(p.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(p.jsx)("img",{className:"postProfileImg",src:r?"/images/users/".concat(r):"/assets/images/noAvatar.png",alt:"userImg"})}),Object(p.jsxs)("div",{children:[Object(p.jsx)(w.b,{to:"/profile/".concat(t.userId._id),children:Object(p.jsx)("span",{className:"postUsername",children:t.userId.username})}),Object(p.jsx)("span",{className:"postDate",children:new Date(t.createdAt).toLocaleString()})]})]}),t.userId._id===i._id&&Object(p.jsx)(Ie.a,{htmlColor:"red",className:"postDeleteIcon",onClick:W})]}),Object(p.jsxs)("div",{className:"postCenter",children:[Object(p.jsx)("span",{className:"postText",children:t.desc}),c&&Object(p.jsx)("img",{className:"postImg",src:"/images/posts/".concat(c),alt:"postImg"})]}),Object(p.jsxs)("div",{className:"postBottom",children:[Object(p.jsxs)("div",{className:"postBottomLeft",children:[Object(p.jsx)("img",{className:"likeIcon",src:"/assets/images/like.png",onClick:U,alt:""}),Object(p.jsx)("span",{className:"postLikeCounter",children:b})]}),Object(p.jsx)("div",{className:"postBottomRight",children:Object(p.jsx)("span",{className:"postCommentText",children:"Comments"})})]}),Object(p.jsxs)("div",{className:"input-group mt-2 ",children:[Object(p.jsx)("textarea",{id:"message",name:"comment-input",style:{resize:"none"},className:"form-control type_msg textarea-bd comment-bg",placeholder:"Write a comment...",value:L,onChange:function(e){F(e.target.value)},maxLength:"10000"}),Object(p.jsx)("div",{className:"input-group-append  justify-content-end d-flex",children:Object(p.jsx)("button",{onClick:q,disabled:I,className:"input-group-text send_btn comment-bg color-main",children:Object(p.jsx)(Ce.a,{})})})]}),I&&Object(p.jsx)("div",{className:"loading",children:Object(p.jsx)(E.a,{color:"inherit",size:"25px"})}),A.length>0&&A.map((function(e){return Object(p.jsx)(Se,{comment:e},e._id)}))]})})}function Ee(e){var t=e.location,s=Object(k.h)().postId,c=Object(n.useState)(),a=Object(u.a)(c,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/api/v1/posts/".concat(s));case 3:t=e.sent,i(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"postContainer",children:[Object(p.jsx)(B,{}),Object(p.jsx)("div",{className:"feed",children:Object(p.jsx)("div",{className:"feedWrapper",children:r&&Object(p.jsx)(Te,{post:r,liked:t.state.isLiked})})}),Object(p.jsx)(J,{hideImg:!1,home:!0})]})]})}s(201);var Le=[{id:1,header:"Pyramids",desc:"The Egyptian pyramids are ancient masonry structures located in Egypt. Approximately 80 pyramids were built within the Kingdom of Kush, now located in the modern country of Sudan. Of those located in modern Egypt, most were built as tombs for the country's pharaohs and their consorts during the Old and Middle Kingdom periods, The earliest known Egyptian pyramids are found at Saqqara, northwest of Memphis, although at least one step-pyramid-like structure has been found at Saqqara, dating to the First Dynasty: Mastaba 3808, which has been attributed to the reign of Pharaoh Anedjib, with inscriptions, and other archaeological remains of the period, suggesting there may have been others, The otherwise earliest among these is the Pyramid of Djoser built c. 2630-2610 BCE during the Third Dynasty. This pyramid and its surrounding complex are generally considered to be the world's oldest monumental structures constructed of dressed masonry, The most famous Egyptian pyramids are those found at Giza, on the outskirts of Cairo. Several of the Giza pyramids are counted among the largest structures ever built, The Pyramid of Khufu is the largest Egyptian pyramid. It is the only one of the Seven Wonders of the Ancient World still in existence, this is despite being the oldest wonder by about 2,000 years",img:"pyramids.jpg",category:"history"},{id:2,header:"Luxor Temple",desc:"The temple has been in almost continuous use as a place of worship right up to the present day. During the Christian era, the temple's hypostyle hall was converted into a Christian church, and the remains of another Coptic church can be seen to the west. Then for thousands of years, the temple was buried beneath the streets and houses of Luxor. Eventually the mosque of Sufi Shaykh Yusuf Abu al-Hajjaj was built over it. This mosque was carefully preserved when the temple was uncovered and forms an integral part of the site today. Before the building works by Rameses II the northern end of the court was originally the entrance to the temple. It was an enclosed colonnade of seven pairs of 52-foot (16m) high open-flower papyrus columns. It was begun by Amenhotep III and completed by Tutankhamun and still support its huge",img:"luxor.jpg",category:"history"},{id:3,header:"What is Physics ?",desc:"Physics is a branch of science that studies matter and its motion as well as how it interacts with energy and forces. Physics is a huge subject. There are many branches of physics including electricity, astronomy, motion, waves, sound, and light. Physics studies the smallest elementary particles and atoms as well as the largest stars and the universe.Scientists who are experts in physics are called physicists. Physicists use the scientific method to test hypotheses and develop scientific laws. Some of the most famous scientists in history are considered physicists such as Isaac Newton and Albert Einstein.Physics Subjects, Physics explains how the world around us works. Many of our modern technologies are based off of scientific discoveries made in the science of physics. Engineers use physics to help design airplanes, cars, buildings, and electronics such as computers and cell phones.",img:"physics.jpg",category:"science"}];s(202);function Fe(e){var t=e.post,s=t.img;return Object(p.jsx)("div",{className:"readOnlyPost post",children:Object(p.jsx)("div",{className:"postWrapper",children:Object(p.jsxs)("div",{className:"postCenter",children:[s&&Object(p.jsx)("img",{className:"postImg",src:"/images/posts/".concat(s),alt:"postImg"}),Object(p.jsx)("span",{className:"postText",children:t.desc})]})})})}function Pe(){var e=Object(k.h)().category;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"learnContainer",children:[Object(p.jsx)(B,{}),Object(p.jsxs)("div",{className:"feed",children:[Object(p.jsx)("p",{className:"learnHeader text-cap",children:e}),Object(p.jsx)("div",{className:"",children:Le.map((function(t){return t.category===e&&Object(p.jsx)(Fe,{post:t},t.id)}))})]})]})]})}var De=function(){var e=Object(n.useContext)(x).user;return Object(p.jsx)(w.a,{children:Object(p.jsxs)(k.d,{children:[Object(p.jsx)(k.b,{path:"/login",component:fe}),Object(p.jsx)(k.b,{path:"/register",component:we}),e?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(k.b,{exact:!0,path:"/",component:Y}),Object(p.jsx)(k.b,{path:"/chats",component:xe}),Object(p.jsx)(k.b,{path:"/requests",component:_e}),Object(p.jsx)(k.b,{path:"/settings",component:Ne}),Object(p.jsx)(k.b,{path:"/chat/:friendId",component:de}),Object(p.jsx)(k.b,{path:"/profile/:userId",component:ge}),Object(p.jsx)(k.b,{path:"/room/:type/:roomID",component:he}),Object(p.jsx)(k.b,{path:"/posts/:postId",component:Ee}),Object(p.jsx)(k.b,{exact:!0,path:"/learning",component:ye}),Object(p.jsx)(k.b,{path:"/learning/:category",component:Pe})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(k.a,{from:"/",to:"/login"}),Object(p.jsx)(k.a,{from:"/profile/:userId",to:"/login"}),Object(p.jsx)(k.a,{from:"/posts/:postId",to:"/login"}),Object(p.jsx)(k.a,{from:"/requests",to:"/login"}),Object(p.jsx)(k.a,{from:"/chats",to:"/login"}),Object(p.jsx)(k.a,{from:"/chat/:userId",to:"/login"}),Object(p.jsx)(k.a,{from:"/room/:type/:roomID",to:"/login"}),Object(p.jsx)(k.a,{from:"/learning",to:"/login"}),Object(p.jsx)(k.a,{from:"/learning/:category",to:"/login"})]})]})})};r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(f,{children:Object(p.jsx)(De,{})})}),document.getElementById("root"))}},[[203,1,2]]]);
//# sourceMappingURL=main.375543ee.chunk.js.map